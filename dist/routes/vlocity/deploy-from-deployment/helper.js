const a27_0x447593=a27_0x22f1;(function(_0x5df1ff,_0x4b77f9){const _0x58562e=a27_0x22f1,_0x44269b=_0x5df1ff();while(!![]){try{const _0x2ef9e7=-parseInt(_0x58562e(0x1c9))/0x1*(-parseInt(_0x58562e(0x191))/0x2)+-parseInt(_0x58562e(0x198))/0x3*(parseInt(_0x58562e(0x1c0))/0x4)+-parseInt(_0x58562e(0x19b))/0x5*(parseInt(_0x58562e(0x1c2))/0x6)+parseInt(_0x58562e(0x1b4))/0x7+-parseInt(_0x58562e(0x190))/0x8*(-parseInt(_0x58562e(0x1a6))/0x9)+parseInt(_0x58562e(0x1b8))/0xa*(-parseInt(_0x58562e(0x1ab))/0xb)+-parseInt(_0x58562e(0x19c))/0xc*(-parseInt(_0x58562e(0x1bd))/0xd);if(_0x2ef9e7===_0x4b77f9)break;else _0x44269b['push'](_0x44269b['shift']());}catch(_0x1e40d8){_0x44269b['push'](_0x44269b['shift']());}}}(a27_0x2fff,0xd283f));const AdmZip=require(a27_0x447593(0x1b1)),childProcess=require('../../../services/child-process'),constants=require(a27_0x447593(0x1c6)),http=require(a27_0x447593(0x197));async function retrieveSourceComponents(_0x39a5aa,_0x4ee910,_0xca6bff,_0x5eab0d){const _0x1bbbfb=a27_0x447593;_0x5eab0d['log'](_0x1bbbfb(0x1bf));const _0x4ff101=[];let _0x2ddc24=![];const _0x15a723=_0x1bbbfb(0x194)+_0x4ee910+'Patch_Manifest__c\x20WHERE\x20'+_0x4ee910+_0x1bbbfb(0x1b2)+_0xca6bff+'\x27';let _0x3bf8ae=await _0x39a5aa['query'](_0x15a723);_0x4ff101[_0x1bbbfb(0x19e)](..._0x3bf8ae[_0x1bbbfb(0x1ae)]['map'](({Id:_0x4c69c7})=>_0x4c69c7)),_0x5eab0d[_0x1bbbfb(0x1bb)]('Component\x20Id\x20List\x20Length,\x20'+_0x3bf8ae['length']);do{_0x3bf8ae=await _0x39a5aa[_0x1bbbfb(0x1af)](_0x3bf8ae[_0x1bbbfb(0x19f)]),_0x4ff101[_0x1bbbfb(0x19e)](..._0x3bf8ae[_0x1bbbfb(0x1ae)][_0x1bbbfb(0x1c1)](({Id:_0x51fd90})=>_0x51fd90)),_0x5eab0d[_0x1bbbfb(0x1bb)](_0x1bbbfb(0x1ca)+_0x3bf8ae[_0x1bbbfb(0x1b0)]),_0x2ddc24=!_0x3bf8ae['done'];}while(_0x2ddc24);return _0x5eab0d[_0x1bbbfb(0x1bb)]('End\x20Retrieve\x20Components\x20Ids'),_0x4ff101;}function retrieveVlocityAttachments(_0x3fb6cf,_0x1dc011,_0x4ba2b4,_0x236701,_0x13b964=[]){return new Promise((_0x3f936e,_0x560203)=>{const _0x2b77b8=a27_0x22f1;try{_0x236701[_0x2b77b8(0x1bb)](_0x2b77b8(0x1c7)),callRetrieveVlocityAttachments(_0x3fb6cf,_0x1dc011,_0x4ba2b4,_0x4ba2b4[_0x2b77b8(0x1b0)],_0x236701,_0x13b964=[])[_0x2b77b8(0x1c5)](_0x2850d1=>{const _0x4a1337=_0x2b77b8;_0x236701[_0x4a1337(0x1bb)](_0x4a1337(0x1c8)),_0x3f936e(_0x2850d1);})[_0x2b77b8(0x1ac)](_0x1a6d50=>{const _0x296d4d=_0x2b77b8;_0x236701[_0x296d4d(0x1bb)](_0x296d4d(0x1a5)),_0x560203(_0x1a6d50);});}catch(_0x2d23d6){_0x236701['log'](_0x2b77b8(0x1a5)),_0x560203(_0x2d23d6);}});}async function callRetrieveVlocityAttachments(_0x24418e,_0xf0ba0e,_0x2f09a7,_0x20fbcc,_0x53f8ca,_0x498c41=[]){const _0x42e230=a27_0x447593,_0x3e9372={'parentIds':_0x2f09a7},_0xe9f2ab=await http['post'](_0x24418e,_0xf0ba0e,_0x3e9372,'GetVlocityComponents/');_0x498c41['push'](..._0xe9f2ab['records']),_0x53f8ca[_0x42e230(0x1bb)](_0x42e230(0x1b7)+Number['parseFloat'](_0x498c41[_0x42e230(0x1b0)]/_0x20fbcc*0x64)[_0x42e230(0x1ad)](0x2)+'%');if(_0xe9f2ab[_0x42e230(0x192)][_0x42e230(0x1b0)]&&_0x2f09a7['length']!==_0x498c41['length'])return await callRetrieveVlocityAttachments(_0x24418e,_0xf0ba0e,_0xe9f2ab[_0x42e230(0x192)],_0x20fbcc,_0x53f8ca,_0x498c41);return _0x498c41;}function unzipComponentList(_0x11f926,_0x4cb154,_0x24e062){return new Promise((_0x2b71c1,_0x5bc99f)=>{const _0x42ba6a=a27_0x22f1;try{_0x24e062[_0x42ba6a(0x1bb)](_0x42ba6a(0x1a7));let _0x27fe58=Promise[_0x42ba6a(0x1c4)]();_0x11f926[_0x42ba6a(0x1ba)](_0x56db78=>{const _0x1519cd=_0x42ba6a;_0x27fe58=_0x27fe58[_0x1519cd(0x1c5)](()=>unzipBuffer(_0x56db78,_0x4cb154));}),_0x27fe58['then'](()=>{const _0x3739e3=_0x42ba6a;_0x24e062[_0x3739e3(0x1bb)](_0x3739e3(0x19d)),_0x2b71c1();})[_0x42ba6a(0x1ac)](_0x5ae2d9=>{const _0xd51a59=_0x42ba6a;_0x24e062[_0xd51a59(0x1bb)](_0xd51a59(0x1a1)+_0x5ae2d9),_0x5bc99f(_0x5ae2d9);});}catch(_0x33541b){_0x24e062[_0x42ba6a(0x1bb)]('Error\x20Unzip\x20Component\x20List\x20'+_0x33541b),_0x5bc99f(_0x33541b);}});}function unzipBuffer(_0x46c365,_0x29a786){return new Promise((_0x1dcd10,_0xc7bdfa)=>{const _0x539f5b=a27_0x22f1;try{const _0xa8cfda=new AdmZip(Buffer[_0x539f5b(0x196)](_0x46c365,_0x539f5b(0x1b9))),_0x5853d4=_0x29a786+'/'+constants['UNZIP_CATALOG_NAME'];_0xa8cfda[_0x539f5b(0x1aa)](_0x5853d4,![]),_0x1dcd10();}catch(_0x522213){_0xc7bdfa(_0x522213);}});}function deployData(_0x1ffb6e,_0x283965,_0x2286e1,_0x26aa94,_0x23d61f,_0x56c2b5,_0x1d12db,_0x4f6f59){return new Promise((_0x29fc26,_0x4a5719)=>{const _0x158c6b=a27_0x22f1;try{_0x4f6f59[_0x158c6b(0x1bb)](_0x158c6b(0x1c3));const _0x54a264=_0x158c6b(0x199),_0x4e27ec=['-sf.accessToken',''+_0x2286e1,_0x158c6b(0x193),''+_0x283965,_0x158c6b(0x1b3),''+constants[_0x158c6b(0x1a9)],_0x158c6b(0x1a4)];_0x26aa94&&_0x4e27ec[_0x158c6b(0x19e)]('-separateMatrixVersions');_0x23d61f&&_0x4e27ec[_0x158c6b(0x19e)](_0x158c6b(0x1a2));_0x4e27ec[_0x158c6b(0x19e)]('packDeploy');_0x56c2b5&&(_0x4e27ec[_0x158c6b(0x19e)](_0x158c6b(0x1b6)),_0x4e27ec[_0x158c6b(0x19e)](_0x158c6b(0x1be)),_0x4e27ec[_0x158c6b(0x19e)](_0x1d12db));_0x4f6f59[_0x158c6b(0x1bb)](_0x4e27ec[_0x158c6b(0x1bc)](0x2)['join']('\x20'));const _0x588879={'cwd':_0x1ffb6e,'maxBuffer':0x400*0x1f4,'shell':!![]};childProcess['callChildProcess'](_0x54a264,_0x4e27ec,_0x4f6f59,_0x588879)[_0x158c6b(0x1c5)](_0x4ea216=>{const _0x19c0ed=_0x158c6b;_0x4f6f59[_0x19c0ed(0x1bb)](_0x19c0ed(0x19a)),_0x29fc26(_0x4ea216);})[_0x158c6b(0x1ac)](_0x1c0781=>{const _0x309f55=_0x158c6b;_0x4f6f59[_0x309f55(0x1bb)](_0x309f55(0x18f)+_0x1c0781),_0x4a5719(_0x1c0781);});}catch(_0x2a6aed){_0x4a5719(_0x2a6aed);}});}function a27_0x22f1(_0x4fe805,_0x426c75){const _0x2fffc4=a27_0x2fff();return a27_0x22f1=function(_0x22f193,_0x16ba21){_0x22f193=_0x22f193-0x18f;let _0x4c9014=_0x2fffc4[_0x22f193];return _0x4c9014;},a27_0x22f1(_0x4fe805,_0x426c75);}function a27_0x2fff(){const _0x2e0fe5=['Component\x20Id\x20List\x20Length,\x20','replace','Error\x20Deploy\x20Data\x20','40Japihu','410vZldwc','ids','-sf.instanceUrl','SELECT\x20Id\x20FROM\x20','getMonth','from','../../../services/http','6tZFCnZ','vlocity','End\x20Deploy\x20Data','5038980LqjiKo','13776obHtxa','End\x20Unzip\x20Component\x20List','push','nextRecordsUrl','getDate','Error\x20Unzip\x20Component\x20List\x20','-separateCalculationProcedureVersions','getMinutes','-autoRetryErrors','Error\x20Retrieve\x20Vlocity\x20Attachments','1487709FnCNPr','Start\x20Unzip\x20Component\x20List','exports','JOB_FILE_NAME','extractAllTo','17340378MqMRRa','catch','toFixed','records','queryMore','length','adm-zip','Patch__c\x20=\x20\x27','-job','5797841FdMruR','getHours','runApex','Retrieved:\x20','10KOIoiL','base64','forEach','log','slice','30784ypQYjm','-apex','Start\x20Retrieve\x20Components\x20Ids','2463204anbywt','map','6OUcahR','Start\x20Deploy\x20Data','resolve','then','../../../constants','Start\x20Retrieve\x20Vlocity\x20Attachments','End\x20Retrieve\x20Vlocity\x20Attachments','1487pasSxF'];a27_0x2fff=function(){return _0x2e0fe5;};return a27_0x2fff();}function getTime(){const _0x336231=a27_0x447593,_0x438cfa=new Date(),_0x370d06=[_0x438cfa[_0x336231(0x1a0)](),_0x438cfa[_0x336231(0x195)]()+0x1,_0x438cfa['getFullYear'](),_0x438cfa[_0x336231(0x1b5)](),_0x438cfa[_0x336231(0x1a3)](),_0x438cfa['getSeconds']()];return _0x370d06[_0x336231(0x1ba)](_0x3e80f8=>_0x3e80f8=_0x3e80f8['toString']()[_0x336231(0x1cb)](/^([0-9])$/,'0$1')),_0x370d06[0x2]+'-'+_0x370d06[0x1]+'-'+_0x370d06[0x0]+'\x20'+_0x370d06[0x3]+':'+_0x370d06[0x4]+':'+_0x370d06[0x5];}module[a27_0x447593(0x1a8)]={'retrieveSourceComponents':retrieveSourceComponents,'retrieveVlocityAttachments':retrieveVlocityAttachments,'unzipComponentList':unzipComponentList,'deployData':deployData,'getTime':getTime};