const a27_0x38e5f1=a27_0x50fc;(function(_0x58b976,_0x44b871){const _0x408aad=a27_0x50fc,_0x25b93a=_0x58b976();while(!![]){try{const _0x524b3e=-parseInt(_0x408aad(0xfb))/0x1*(-parseInt(_0x408aad(0x128))/0x2)+-parseInt(_0x408aad(0x12a))/0x3*(-parseInt(_0x408aad(0x104))/0x4)+-parseInt(_0x408aad(0x107))/0x5+parseInt(_0x408aad(0x110))/0x6*(parseInt(_0x408aad(0x133))/0x7)+-parseInt(_0x408aad(0x12f))/0x8*(parseInt(_0x408aad(0x10b))/0x9)+-parseInt(_0x408aad(0x12e))/0xa*(-parseInt(_0x408aad(0x106))/0xb)+-parseInt(_0x408aad(0x126))/0xc;if(_0x524b3e===_0x44b871)break;else _0x25b93a['push'](_0x25b93a['shift']());}catch(_0x34c132){_0x25b93a['push'](_0x25b93a['shift']());}}}(a27_0x1379,0x534f0));function a27_0x50fc(_0x1ba4d6,_0x15af8f){const _0x13794b=a27_0x1379();return a27_0x50fc=function(_0x50fc4a,_0x309059){_0x50fc4a=_0x50fc4a-0xf9;let _0x33672c=_0x13794b[_0x50fc4a];return _0x33672c;},a27_0x50fc(_0x1ba4d6,_0x15af8f);}const AdmZip=require(a27_0x38e5f1(0x111)),childProcess=require(a27_0x38e5f1(0xf9)),constants=require(a27_0x38e5f1(0x135)),http=require(a27_0x38e5f1(0x108));async function retrieveSourceComponents(_0x270862,_0x5641d4,_0x723933,_0x33cf72){const _0x1ae078=a27_0x38e5f1;_0x33cf72[_0x1ae078(0x136)]('Start\x20Retrieve\x20Components\x20Ids');const _0x4b99fd=[];let _0x7aba64=![];const _0x170bd8='SELECT\x20Id\x20FROM\x20'+_0x5641d4+_0x1ae078(0x11c)+_0x5641d4+'Patch__c\x20=\x20\x27'+_0x723933+'\x27';let _0x4c59c7=await _0x270862[_0x1ae078(0x103)](_0x170bd8);_0x4b99fd[_0x1ae078(0x113)](..._0x4c59c7[_0x1ae078(0x119)][_0x1ae078(0x116)](({Id:_0x581fc8})=>_0x581fc8)),_0x33cf72['log']('Component\x20Id\x20List\x20Length,\x20'+_0x4c59c7[_0x1ae078(0x10a)]);do{_0x4c59c7=await _0x270862[_0x1ae078(0x124)](_0x4c59c7[_0x1ae078(0x129)]),_0x4b99fd[_0x1ae078(0x113)](..._0x4c59c7['records'][_0x1ae078(0x116)](({Id:_0x3af07a})=>_0x3af07a)),_0x33cf72[_0x1ae078(0x136)](_0x1ae078(0x11a)+_0x4c59c7[_0x1ae078(0x10a)]),_0x7aba64=!_0x4c59c7['done'];}while(_0x7aba64);return _0x33cf72[_0x1ae078(0x136)](_0x1ae078(0x131)),_0x4b99fd;}function retrieveVlocityAttachments(_0x50b3fb,_0x2e4320,_0x529182,_0x370909,_0x80104a=[]){return new Promise((_0x176f57,_0x3e0f0a)=>{const _0x475184=a27_0x50fc;try{_0x370909[_0x475184(0x136)]('Start\x20Retrieve\x20Vlocity\x20Attachments'),callRetrieveVlocityAttachments(_0x50b3fb,_0x2e4320,_0x529182,_0x529182['length'],_0x370909,_0x80104a=[])[_0x475184(0x118)](_0x290606=>{const _0x5a7b7b=_0x475184;_0x370909[_0x5a7b7b(0x136)]('End\x20Retrieve\x20Vlocity\x20Attachments'),_0x176f57(_0x290606);})[_0x475184(0xff)](_0x50eb27=>{_0x370909['log']('Error\x20Retrieve\x20Vlocity\x20Attachments'),_0x3e0f0a(_0x50eb27);});}catch(_0x1221b8){_0x370909['log'](_0x475184(0x112)),_0x3e0f0a(_0x1221b8);}});}async function callRetrieveVlocityAttachments(_0x55d7b5,_0x2d76f3,_0x2fffb5,_0x33424b,_0x4b933d,_0x26c84b=[]){const _0x3b7020=a27_0x38e5f1,_0x119551={'parentIds':_0x2fffb5},_0x16cf0e=await http[_0x3b7020(0x11b)](_0x55d7b5,_0x2d76f3,_0x119551,_0x3b7020(0x101));_0x26c84b[_0x3b7020(0x113)](..._0x16cf0e[_0x3b7020(0x119)]),_0x4b933d[_0x3b7020(0x136)](_0x3b7020(0x10c)+Number['parseFloat'](_0x26c84b['length']/_0x33424b*0x64)[_0x3b7020(0x123)](0x2)+'%');if(_0x16cf0e[_0x3b7020(0x11f)][_0x3b7020(0x10a)]&&_0x2fffb5[_0x3b7020(0x10a)]!==_0x26c84b[_0x3b7020(0x10a)])return await callRetrieveVlocityAttachments(_0x55d7b5,_0x2d76f3,_0x16cf0e[_0x3b7020(0x11f)],_0x33424b,_0x4b933d,_0x26c84b);return _0x26c84b;}function unzipComponentList(_0x479339,_0x4e8af5,_0x3b7f69){return new Promise((_0x54f5cb,_0x58bab6)=>{const _0x43feb7=a27_0x50fc;try{_0x3b7f69[_0x43feb7(0x136)](_0x43feb7(0x11d));let _0x42b659=Promise['resolve']();_0x479339[_0x43feb7(0xfa)](_0x22f7a2=>{const _0x467030=_0x43feb7;_0x42b659=_0x42b659[_0x467030(0x118)](()=>unzipBuffer(_0x22f7a2,_0x4e8af5));}),_0x42b659[_0x43feb7(0x118)](()=>{const _0x5bd02c=_0x43feb7;_0x3b7f69[_0x5bd02c(0x136)]('End\x20Unzip\x20Component\x20List'),_0x54f5cb();})[_0x43feb7(0xff)](_0x26fc1b=>{const _0x2c4d58=_0x43feb7;_0x3b7f69[_0x2c4d58(0x136)](_0x2c4d58(0x109)+_0x26fc1b),_0x58bab6(_0x26fc1b);});}catch(_0x4c6a4a){_0x3b7f69[_0x43feb7(0x136)]('Error\x20Unzip\x20Component\x20List\x20'+_0x4c6a4a),_0x58bab6(_0x4c6a4a);}});}function unzipBuffer(_0x919f1b,_0x38f88e){return new Promise((_0x100b86,_0x5c7fbc)=>{const _0x30da1a=a27_0x50fc;try{const _0x31967d=new AdmZip(Buffer[_0x30da1a(0x130)](_0x919f1b,'base64')),_0x28ac31=_0x38f88e+'/'+constants[_0x30da1a(0x13a)];_0x31967d['extractAllTo'](_0x28ac31,![]),_0x100b86();}catch(_0x43db85){_0x5c7fbc(_0x43db85);}});}function deployData(_0x1244af,_0x20c0b8,_0x2a3934,_0x101d88,_0x446e02,_0x15e8e0,_0x2f7906,_0x28af9c){return new Promise((_0x51e78f,_0x3371ba)=>{const _0x219aa5=a27_0x50fc;try{_0x28af9c['log'](_0x219aa5(0x138));const _0x2464b3=_0x219aa5(0x12c),_0x1e7c37=[_0x219aa5(0xfe),''+_0x2a3934,_0x219aa5(0x12d),''+_0x20c0b8,_0x219aa5(0x122),''+constants[_0x219aa5(0x102)],_0x219aa5(0x114)];_0x101d88&&_0x1e7c37[_0x219aa5(0x113)](_0x219aa5(0x127));_0x446e02&&_0x1e7c37[_0x219aa5(0x113)](_0x219aa5(0x134));_0x1e7c37[_0x219aa5(0x113)](_0x219aa5(0x12b));_0x15e8e0&&(_0x1e7c37['push'](_0x219aa5(0x10e)),_0x1e7c37['push'](_0x219aa5(0x139)),_0x1e7c37[_0x219aa5(0x113)](_0x2f7906));_0x28af9c[_0x219aa5(0x136)](_0x1e7c37[_0x219aa5(0x125)](0x2)['join']('\x20'));const _0x3ea4ec={'cwd':_0x1244af,'maxBuffer':0x400*0x1f4,'shell':!![]};childProcess[_0x219aa5(0x132)](_0x2464b3,_0x1e7c37,_0x28af9c,_0x3ea4ec)[_0x219aa5(0x118)](_0x1d3e7b=>{const _0x4d76bd=_0x219aa5;_0x28af9c['log'](_0x4d76bd(0xfc)),_0x51e78f(_0x1d3e7b);})[_0x219aa5(0xff)](_0x356aea=>{const _0x31d8ce=_0x219aa5;_0x28af9c[_0x31d8ce(0x136)](_0x31d8ce(0x137)+_0x356aea),_0x3371ba(_0x356aea);});}catch(_0x41f810){_0x3371ba(_0x41f810);}});}function getTime(){const _0x373f83=a27_0x38e5f1,_0x2759ee=new Date(),_0x4e7380=[_0x2759ee[_0x373f83(0x117)](),_0x2759ee[_0x373f83(0x11e)]()+0x1,_0x2759ee[_0x373f83(0xfd)](),_0x2759ee[_0x373f83(0x105)](),_0x2759ee[_0x373f83(0x100)](),_0x2759ee[_0x373f83(0x10f)]()];return _0x4e7380[_0x373f83(0xfa)](_0x1fdcf6=>_0x1fdcf6=_0x1fdcf6[_0x373f83(0x115)]()[_0x373f83(0x10d)](/^([0-9])$/,_0x373f83(0x121))),_0x4e7380[0x2]+'-'+_0x4e7380[0x1]+'-'+_0x4e7380[0x0]+'\x20'+_0x4e7380[0x3]+':'+_0x4e7380[0x4]+':'+_0x4e7380[0x5];}module[a27_0x38e5f1(0x120)]={'retrieveSourceComponents':retrieveSourceComponents,'retrieveVlocityAttachments':retrieveVlocityAttachments,'unzipComponentList':unzipComponentList,'deployData':deployData,'getTime':getTime};function a27_0x1379(){const _0x2c4be2=['from','End\x20Retrieve\x20Components\x20Ids','callChildProcess','7658MBMFDj','-separateCalculationProcedureVersions','../../../constants','log','Error\x20Deploy\x20Data\x20','Start\x20Deploy\x20Data','-apex','UNZIP_CATALOG_NAME','../../../services/child-process','forEach','3OmGvTK','End\x20Deploy\x20Data','getFullYear','-sf.accessToken','catch','getMinutes','GetVlocityComponents/','JOB_FILE_NAME','query','268516QDwmvq','getHours','3852574rqNaEp','822845vGxTyv','../../../services/http','Error\x20Unzip\x20Component\x20List\x20','length','9yEJfzY','Retrieved:\x20','replace','runApex','getSeconds','1764cERcCC','adm-zip','Error\x20Retrieve\x20Vlocity\x20Attachments','push','-autoRetryErrors','toString','map','getDate','then','records','Component\x20Id\x20List\x20Length,\x20','post','Patch_Manifest__c\x20WHERE\x20','Start\x20Unzip\x20Component\x20List','getMonth','ids','exports','0$1','-job','toFixed','queryMore','slice','3800112rTiFTO','-separateMatrixVersions','308458MmdnSB','nextRecordsUrl','9SXfFjm','packDeploy','vlocity','-sf.instanceUrl','10kyMWKA','4107736OgDpgj'];a27_0x1379=function(){return _0x2c4be2;};return a27_0x1379();}