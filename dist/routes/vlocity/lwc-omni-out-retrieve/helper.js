const a34_0x32a05b=a34_0xa03f;(function(_0x153a3a,_0x153338){const _0x400dec=a34_0xa03f,_0x366e99=_0x153a3a();while(!![]){try{const _0x9aed62=parseInt(_0x400dec(0x1d4))/0x1+-parseInt(_0x400dec(0x1f5))/0x2+-parseInt(_0x400dec(0x1e9))/0x3+-parseInt(_0x400dec(0x1e4))/0x4*(-parseInt(_0x400dec(0x1d0))/0x5)+parseInt(_0x400dec(0x1ff))/0x6*(parseInt(_0x400dec(0x1e5))/0x7)+parseInt(_0x400dec(0x1b9))/0x8+parseInt(_0x400dec(0x1b3))/0x9;if(_0x9aed62===_0x153338)break;else _0x366e99['push'](_0x366e99['shift']());}catch(_0x123fc1){_0x366e99['push'](_0x366e99['shift']());}}}(a34_0x4b02,0x823da));const path=require(a34_0x32a05b(0x1ca)),fs=require('fs'),fse=require(a34_0x32a05b(0x1fd)),AdmZip=require(a34_0x32a05b(0x1aa)),constants=require(a34_0x32a05b(0x1e3)),http=require(a34_0x32a05b(0x1b1));function query(_0x552cc4,_0x4d3d12,_0x4f90e3){return new Promise((_0x579a38,_0x28b7bf)=>{const _0xe9f8ba=a34_0xa03f;try{_0x4f90e3[_0xe9f8ba(0x1b4)](_0xe9f8ba(0x1c4)),_0x552cc4[_0xe9f8ba(0x1cb)](_0x4d3d12,(_0x2e76fa,_0xc25d33)=>{const _0x1ddd6b=_0xe9f8ba;_0x2e76fa?(_0x4f90e3[_0x1ddd6b(0x1b4)](_0x1ddd6b(0x1f1)+_0x2e76fa),_0x28b7bf(_0x2e76fa)):(_0x4f90e3[_0x1ddd6b(0x1b4)]('End\x20Query'),_0x579a38(_0xc25d33[_0x1ddd6b(0x1f2)][_0x1ddd6b(0x1b5)](_0x4e0f82=>_0x4e0f82['vlocity_cmt__Type__c']&&_0x4e0f82[_0x1ddd6b(0x1dd)]&&_0x4e0f82[_0x1ddd6b(0x1ce)])[_0x1ddd6b(0x1a7)](({vlocity_cmt__Type__c:_0x5eb739,vlocity_cmt__SubType__c:_0x4a1802,vlocity_cmt__Language__c:_0xaeb4b0})=>''+_0x5eb739+_0x4a1802+_0xaeb4b0)));});}catch(_0x4a93c5){_0x28b7bf(_0x4a93c5),_0x4f90e3[_0xe9f8ba(0x1b4)](_0xe9f8ba(0x1f1)+_0x4a93c5);}});}function fetchOmniOutContentList(_0x37f830,_0x14bb12,_0x1acb51){return new Promise((_0x4f78b5,_0x2c74c9)=>{const _0x59f68f=a34_0xa03f;try{_0x1acb51[_0x59f68f(0x1b4)](_0x59f68f(0x1ea));const _0x54faee=[];let _0x30b77e=0x1,_0x32679c=Promise[_0x59f68f(0x1b8)]();_0x14bb12[_0x59f68f(0x1c9)](_0x353c06=>{const _0x14e20f=_0x59f68f;_0x32679c=_0x32679c[_0x14e20f(0x1c2)](()=>fetchOmniOutContent(_0x37f830,_0x353c06))[_0x14e20f(0x1c2)](_0x375d1d=>{const _0x3f68b4=_0x14e20f;_0x375d1d&&_0x375d1d[_0x3f68b4(0x202)]&&_0x375d1d[_0x3f68b4(0x202)]['length']===0x2&&(_0x375d1d[_0x3f68b4(0x202)][0x0][_0x3f68b4(0x203)]===0xc8&&_0x54faee[_0x3f68b4(0x1b6)]({'lwcComponentList':_0x375d1d[_0x3f68b4(0x202)][0x1][_0x3f68b4(0x1c5)][_0x3f68b4(0x1f2)],'name':_0x375d1d[_0x3f68b4(0x202)][0x0][_0x3f68b4(0x1c5)][_0x3f68b4(0x1f2)][0x0]['DeveloperName']})),_0x1acb51[_0x3f68b4(0x1b4)](_0x3f68b4(0x1fe)+_0x30b77e++ +_0x3f68b4(0x1da)+_0x54faee['length']+',\x20all\x20'+_0x14bb12[_0x3f68b4(0x200)]);});}),_0x32679c[_0x59f68f(0x1c2)](()=>{_0x1acb51['log']('End\x20Fetch\x20OmniOut\x20Content\x20List\x20'),_0x4f78b5(_0x54faee);})['catch'](_0x18abdb=>{const _0x1c8f92=_0x59f68f;_0x1acb51[_0x1c8f92(0x1b4)](_0x1c8f92(0x1ef)+_0x18abdb),_0x2c74c9(_0x18abdb);});}catch(_0x4bdcc3){_0x2c74c9(_0x4bdcc3),_0x1acb51[_0x59f68f(0x1b4)](_0x59f68f(0x1ef)+_0x4bdcc3);}});}function fetchOmniOutContent(_0x5f5884,_0x49a764){const _0x173240=a34_0x32a05b;_0x49a764=_0x49a764[_0x173240(0x1b0)]('-','')['replace'](_0x173240(0x1c1),'');const _0x393b9c={'allOrNone':!![],'compositeRequest':[{'method':_0x173240(0x1c0),'referenceId':_0x173240(0x1a9),'url':_0x173240(0x1d6)+_0x49a764+'\x27'},{'method':_0x173240(0x1c0),'referenceId':_0x173240(0x1b7),'url':'/services/data/v48.0/tooling/query?q=SELECT+Id,FilePath,Format,Source+FROM+LightningComponentResource+WHERE+LightningComponentBundleId=\x27@{bundleInfo.records[0].Id}\x27'}]},_0xb09d6f=_0x5f5884[_0x173240(0x1d7)],_0x407eed={'method':_0x173240(0x1e6),'url':_0xb09d6f+_0x173240(0x1ac),'body':JSON[_0x173240(0x1e7)](_0x393b9c),'headers':{'Content-Type':'application/json'}};return _0x5f5884[_0x173240(0x1ed)](_0x407eed);}function a34_0xa03f(_0x2f02b0,_0x24f119){const _0x4b0250=a34_0x4b02();return a34_0xa03f=function(_0xa03f09,_0x4a0732){_0xa03f09=_0xa03f09-0x1a4;let _0x1ef12a=_0x4b0250[_0xa03f09];return _0x1ef12a;},a34_0xa03f(_0x2f02b0,_0x24f119);}function createLwcFiles(_0x3fd3ca,_0x4d0483,_0x18939e,_0x243667){return new Promise((_0x5f423f,_0x2c7ea4)=>{const _0x3949a6=a34_0xa03f;try{_0x243667[_0x3949a6(0x1b4)](_0x3949a6(0x201));const _0x8ede5f=[];let _0x119d7e=[],_0x26fc71=0x0,_0x5f377e=new AdmZip();_0x4d0483[_0x3949a6(0x1c9)](_0x8a0e3f=>{const _0x569e7c=_0x3949a6;_0x119d7e['push']({'apiName':_0x8a0e3f['name'],'componentType':_0x569e7c(0x1cc),'label':_0x569e7c(0x1b2)+_0x8a0e3f[_0x569e7c(0x1fc)]}),_0x8a0e3f[_0x569e7c(0x1a6)][_0x569e7c(0x1c9)](_0x131d58=>{const _0x5565f9=_0x569e7c;_0x131d58[_0x5565f9(0x1af)]!==_0x5565f9(0x1ee)&&(_0x26fc71+=_0x131d58['Source'][_0x5565f9(0x200)],_0x26fc71<constants[_0x5565f9(0x1c7)]?_0x5f377e[_0x5565f9(0x1f7)](''+_0x131d58[_0x5565f9(0x1c3)],Buffer[_0x5565f9(0x1e2)](_0x131d58['Source']['replace'](new RegExp(_0x5565f9(0x1bd),'g'),'c'))):(_0x8ede5f['push']({'snapshotId':_0x18939e,'typeList':[{'type':_0x5565f9(0x1cc),'zip':_0x5f377e['toBuffer']()['toString'](_0x5565f9(0x1de)),'componentList':_0x119d7e}]}),_0x119d7e=[],_0x26fc71=0x0,_0x5f377e=new AdmZip()));}),delete _0x8a0e3f[_0x569e7c(0x1a6)];}),_0x119d7e[_0x3949a6(0x200)]&&_0x8ede5f['push']({'snapshotId':_0x18939e,'typeList':[{'type':'LightningComponentBundle','zip':_0x5f377e[_0x3949a6(0x1ec)]()['toString'](_0x3949a6(0x1de)),'componentList':_0x119d7e}]}),_0x243667['log'](_0x3949a6(0x1a4)),_0x5f423f(_0x8ede5f);}catch(_0x2af77c){_0x243667[_0x3949a6(0x1b4)](_0x3949a6(0x1ba)+_0x2af77c),_0x2c7ea4(_0x2af77c);}});}function sendComponents(_0xc09cb5,_0x2d5a22,_0xf2d736,_0x43e126){return new Promise((_0x8692d9,_0x4a5004)=>{const _0x7732f0=a34_0xa03f;try{_0x43e126[_0x7732f0(0x1b4)](_0x7732f0(0x1d9));let _0x4a94ad=Promise[_0x7732f0(0x1b8)]();_0xf2d736['forEach'](_0x326135=>{const _0x458374=_0x7732f0;_0x4a94ad=_0x4a94ad[_0x458374(0x1c2)](()=>callSentComponents(_0xc09cb5,_0x2d5a22,_0x326135));}),_0x4a94ad[_0x7732f0(0x1c2)](()=>{const _0x15c26f=_0x7732f0;_0x43e126['log'](_0x15c26f(0x1fb)),_0x8692d9();})[_0x7732f0(0x1df)](_0x4bee67=>{const _0x5095ae=_0x7732f0;_0x43e126[_0x5095ae(0x1b4)](_0x5095ae(0x1d3)+_0x4bee67),_0x4a5004(_0x4bee67);});}catch(_0x3e1025){_0x43e126[_0x7732f0(0x1b4)](_0x7732f0(0x1d3)+_0x3e1025),_0x4a5004(_0x3e1025);}});}function callSentComponents(_0x1f0115,_0x6f1ffa,_0x16f01f){return new Promise((_0x402377,_0x1e4913)=>{const _0x367f63=a34_0xa03f;try{const _0x20f928={'methodType':constants[_0x367f63(0x1ad)],'body':JSON[_0x367f63(0x1e7)](_0x16f01f)};http['post'](_0x1f0115,_0x6f1ffa[_0x367f63(0x1b0)]('__',''),JSON[_0x367f63(0x1e7)](_0x20f928))[_0x367f63(0x1c2)](()=>{_0x402377();})[_0x367f63(0x1df)](_0x1e4913);}catch(_0x57127e){_0x1e4913(_0x57127e);}});}function completeDeployment(_0x442500,_0x224923,_0x2f1d1b,_0x2d7849,_0x4cc92f,_0xf375fc,_0x171c99,_0x57f0ea,_0x55d744=![]){return new Promise((_0x68a4ed,_0xf5bc99)=>{const _0x387ade=a34_0xa03f;try{Promise[_0x387ade(0x1b8)]()[_0x387ade(0x1c2)](()=>updateAttachmentLog(_0x442500,_0x224923,_0xf375fc,_0x57f0ea,_0x55d744,!![]))[_0x387ade(0x1c2)](_0x1df04f=>{return _0x55d744=_0x1df04f,http['callUpdateLog'](_0x224923,_0x4cc92f,_0x2f1d1b,_0x171c99,_0x57f0ea,_0x1df04f);})[_0x387ade(0x1c2)](()=>callUpdateSnapshot(_0x224923,_0x2d7849,_0x2f1d1b,_0x55d744,_0x57f0ea));}catch(_0x41d8e9){_0xf5bc99(_0x41d8e9);}});}function updateAttachmentLog(_0x4fbcdc,_0x462026,_0x52eacb,_0x45c4f0,_0x2583fd,_0x47afdf=![]){return new Promise(_0x23c126=>{const _0x59783b=a34_0xa03f;try{_0x45c4f0['log'](_0x59783b(0x1c6)),Promise[_0x59783b(0x1b8)]()[_0x59783b(0x1c2)](()=>http[_0x59783b(0x1f4)](_0x462026,_0x52eacb,_0x45c4f0))[_0x59783b(0x1c2)](_0x326b89=>http[_0x59783b(0x1d5)](_0x462026,_0x52eacb,_0x326b89,_0x45c4f0,_0x2583fd))[_0x59783b(0x1c2)](()=>_0x23c126(_0x2583fd))[_0x59783b(0x1df)](()=>_0x23c126(_0x2583fd));}catch(_0x523e87){_0x45c4f0[_0x59783b(0x1b4)](_0x59783b(0x1c8)+_0x523e87),_0x23c126(_0x2583fd);}});}function a34_0x4b02(){const _0x27ee15=['base64','catch','children','End\x20Update\x20Snapshot','from','../../../constants','320PnJMSe','2634961jfuusM','POST','stringify','/vlocity_cmt/v1/GenericInvoke/','1988625olSzmG','Start\x20Fetch\x20OmniOut\x20Content\x20List\x20','Start\x20Update\x20Snapshot','toBuffer','request','(hidden)','Error\x20Fetch\x20OmniOut\x20Content\x20List\x20','Error\x20Extract\x20LWC\x20Dependencies\x20','Error\x20Query\x20','records','propSetMap','getAttachmentBody','1264356oecKyB','lwcComponentOverride','addFile','End\x20Get\x20Dependency\x20List\x20','Is_Completed__c','\x20from\x20','End\x20Send\x20Components','name','fs-extra','Process\x20Fetch\x20OmniOut\x20Content,\x20processed\x20','6tRQvDr','length','Start\x20Create\x20Lwc\x20Files','compositeResponse','httpStatusCode','End\x20Create\x20Lwc\x20Files','type','lwcComponentList','map','Error\x20Update\x20Snapshot','bundleInfo','adm-zip','End\x20Extract\x20LWC\x20Dependencies','/services/data/v50.0/tooling/composite','METHOD_TYPE_ADD_COMPONENTS_TO_SNAPSHOT','Is_Error__c','Source','replace','../../../services/http','lwc/','387171dgobFL','log','filter','push','bundleResources','resolve','7775552ZHyuKd','Error\x20Create\x20Lwc\x20Files\x20','post','exports','vlocity_cmt','Start\x20Get\x20Dependency\x20List\x20','parse','GET','vlocity_cmt__','then','FilePath','Start\x20Query','body','Start\x20Update\x20Attachment\x20Log','MAX_SIZE_UNZIP_ATTACHMENT','Error\x20Update\x20Attachment\x20Log\x20','forEach','path','query','LightningComponentBundle','elementTypeToLwcTemplateMapping','vlocity_cmt__Language__c','eleArray','15005xpbWDC','updateSnapshot','Process\x20Get\x20Dependency,\x20processed\x20','Error\x20Send\x20Components\x20','197053kwPGqS','callUpdateAttachmentLog','/services/data/v48.0/tooling/query?q=SELECT+Id,DeveloperName,Description+FROM+LightningComponentBundle+WHERE+DeveloperName=\x27','instanceUrl','Error\x20Get\x20Prefilled\x20JSON\x20','Start\x20Send\x20Components',',\x20retrieved\x20','Vlocity\x20BuildJSONWithPrefill','Error\x20Get\x20Dependency\x20List\x20','vlocity_cmt__SubType__c'];a34_0x4b02=function(){return _0x27ee15;};return a34_0x4b02();}function callUpdateSnapshot(_0x10bfb0,_0x756955,_0x1be006,_0x5626ba,_0x5d0c38){return new Promise((_0x571e8a,_0x2946fa)=>{const _0x57905e=a34_0xa03f;try{_0x5d0c38[_0x57905e(0x1b4)](_0x57905e(0x1eb));const _0x1ec78c={'Id':_0x756955,[_0x1be006+_0x57905e(0x1f9)]:!![],[_0x1be006+_0x57905e(0x1ae)]:_0x5626ba};_0x10bfb0[_0x57905e(0x1d1)](_0x1be006,_0x1ec78c)[_0x57905e(0x1c2)](()=>{const _0x1ee1e1=_0x57905e;_0x5d0c38['log'](_0x1ee1e1(0x1e1)),_0x571e8a();})[_0x57905e(0x1df)](_0x358289=>{const _0x356a0b=_0x57905e;_0x5d0c38[_0x356a0b(0x1b4)](_0x356a0b(0x1a8)),_0x2946fa(_0x358289);});}catch(_0x43f6ae){_0x5d0c38[_0x57905e(0x1b4)](_0x57905e(0x1a8)),_0x2946fa(_0x43f6ae);}});}function getDependencyList(_0xbcfa9,_0x425e46,_0x1acf19){return new Promise((_0x5ee0c3,_0x55e025)=>{const _0xa8ffc1=a34_0xa03f;try{_0x1acf19[_0xa8ffc1(0x1b4)](_0xa8ffc1(0x1be));const _0x4fa6cc=[];let _0x216b75=Promise[_0xa8ffc1(0x1b8)]();_0x425e46[_0xa8ffc1(0x1c9)](_0x337589=>{const _0x46cb6e=_0xa8ffc1;_0x216b75=_0x216b75[_0x46cb6e(0x1c2)](()=>getPrefilledJSON(_0xbcfa9,_0x337589,_0x1acf19))[_0x46cb6e(0x1c2)](_0xa6a605=>{const _0x2fcb1b=_0x46cb6e;_0x4fa6cc[_0x2fcb1b(0x1b6)](_0xa6a605),_0x1acf19[_0x2fcb1b(0x1b4)](_0x2fcb1b(0x1d2)+_0x4fa6cc['length']+_0x2fcb1b(0x1fa)+_0x425e46[_0x2fcb1b(0x200)]);});}),_0x216b75[_0xa8ffc1(0x1c2)](()=>{const _0x56ceef=_0xa8ffc1;_0x1acf19[_0x56ceef(0x1b4)](_0x56ceef(0x1f8)),_0x5ee0c3(_0x4fa6cc);})[_0xa8ffc1(0x1df)](_0x27f2b9=>{const _0x2a223d=_0xa8ffc1;_0x1acf19['log'](_0x2a223d(0x1dc)+_0x27f2b9),_0x55e025(_0x27f2b9);});}catch(_0x47d40b){_0x1acf19[_0xa8ffc1(0x1b4)](_0xa8ffc1(0x1dc)+_0x47d40b),_0x55e025(_0x47d40b);}});}function getPrefilledJSON(_0x46df08,_0x366b3,_0x438d1e){return new Promise((_0x19543d,_0x4390bc)=>{const _0x508b3a=a34_0xa03f;try{const _0x2d9cc3={'sClassName':_0x508b3a(0x1db),'sType':_0x366b3['vlocity_cmt__Type__c'],'sSubType':_0x366b3[_0x508b3a(0x1dd)],'sLang':_0x366b3['vlocity_cmt__Language__c']};_0x46df08['apex'][_0x508b3a(0x1bb)](_0x508b3a(0x1e8),_0x2d9cc3,(_0x226b3d,_0x49fa1a)=>{const _0xe8df62=_0x508b3a;_0x226b3d?(_0x438d1e['log']('Error\x20getPrefilledJSON\x20'+_0x226b3d),_0x4390bc(_0x226b3d)):_0x19543d(JSON[_0xe8df62(0x1bf)](_0x49fa1a));});}catch(_0x29bbff){_0x4390bc(_0x29bbff),_0x438d1e['log'](_0x508b3a(0x1d8)+_0x29bbff);}});}function extractLwcDependencies(_0x544afd,_0x4dcde7){return new Promise((_0x5d73c8,_0x3ceecc)=>{const _0x44accf=a34_0xa03f;try{_0x4dcde7['log']('Start\x20Extract\x20LWC\x20Dependencies');const _0x4266ac=[];_0x544afd[_0x44accf(0x1c9)](_0x2401c6=>{const _0x5576d2=_0x44accf;_0x2401c6[_0x5576d2(0x1e0)]&&_0x2401c6['children'][_0x5576d2(0x200)]>0x0&&_0x2401c6[_0x5576d2(0x1e0)][_0x5576d2(0x1c9)](_0x3ce084=>{const _0x413bfa=_0x5576d2;_0x3ce084[_0x413bfa(0x1e0)]&&_0x3ce084[_0x413bfa(0x1e0)][_0x413bfa(0x200)]>0x0&&_0x3ce084[_0x413bfa(0x1e0)]['forEach'](_0x2d5562=>{const _0x1e6d71=_0x413bfa;_0x2d5562['eleArray'][0x0][_0x1e6d71(0x1a5)]==='Custom\x20Lightning\x20Web\x20Component'&&_0x4266ac[_0x1e6d71(0x1b6)](_0x2d5562[_0x1e6d71(0x1cf)][0x0]['propSetMap']['lwcName']);});});if(_0x2401c6[_0x5576d2(0x1f3)]&&_0x2401c6[_0x5576d2(0x1f3)][_0x5576d2(0x1cd)])for(const [_0x599183,_0x43374d]of Object['entries'](_0x2401c6[_0x5576d2(0x1f3)][_0x5576d2(0x1cd)])){_0x4266ac[_0x5576d2(0x1b6)](_0x43374d);}_0x2401c6[_0x5576d2(0x1e0)]&&_0x2401c6[_0x5576d2(0x1e0)][_0x5576d2(0x200)]>0x0&&_0x2401c6['children']['forEach'](_0x2f8b99=>{const _0x5e80d1=_0x5576d2;_0x2f8b99[_0x5e80d1(0x1f3)]&&_0x2f8b99[_0x5e80d1(0x1f3)][_0x5e80d1(0x1f6)]&&_0x4266ac['push'](_0x2f8b99[_0x5e80d1(0x1f3)][_0x5e80d1(0x1f6)]),_0x2f8b99['children']&&_0x2f8b99[_0x5e80d1(0x1e0)][_0x5e80d1(0x200)]>0x0&&_0x2f8b99['children'][_0x5e80d1(0x1c9)](_0x27131f=>{const _0x1ef7fd=_0x5e80d1;_0x27131f[_0x1ef7fd(0x1cf)][0x0][_0x1ef7fd(0x1f3)]&&_0x27131f[_0x1ef7fd(0x1cf)][0x0]['propSetMap'][_0x1ef7fd(0x1f6)]&&_0x4266ac[_0x1ef7fd(0x1b6)](_0x27131f[_0x1ef7fd(0x1cf)][0x0][_0x1ef7fd(0x1f3)][_0x1ef7fd(0x1f6)]);});});}),_0x4dcde7['log'](_0x44accf(0x1ab)),_0x5d73c8(_0x4266ac);}catch(_0x470ee0){_0x4dcde7['log'](_0x44accf(0x1f0)+_0x470ee0),_0x3ceecc(_0x470ee0);}});}module[a34_0x32a05b(0x1bc)]={'query':query,'getDependencyList':getDependencyList,'extractLwcDependencies':extractLwcDependencies,'fetchOmniOutContentList':fetchOmniOutContentList,'createLwcFiles':createLwcFiles,'sendComponents':sendComponents,'completeDeployment':completeDeployment};