const a24_0x1f2de3=a24_0x4a90;(function(_0x549a59,_0x258b0a){const _0x59a9b4=a24_0x4a90,_0x5ac6fa=_0x549a59();while(!![]){try{const _0x17b85e=parseInt(_0x59a9b4(0x138))/0x1*(parseInt(_0x59a9b4(0x140))/0x2)+parseInt(_0x59a9b4(0x123))/0x3+-parseInt(_0x59a9b4(0x132))/0x4*(-parseInt(_0x59a9b4(0x177))/0x5)+parseInt(_0x59a9b4(0x168))/0x6*(parseInt(_0x59a9b4(0x1a3))/0x7)+-parseInt(_0x59a9b4(0x15d))/0x8*(-parseInt(_0x59a9b4(0x161))/0x9)+-parseInt(_0x59a9b4(0x13e))/0xa*(parseInt(_0x59a9b4(0x151))/0xb)+-parseInt(_0x59a9b4(0x113))/0xc;if(_0x17b85e===_0x258b0a)break;else _0x5ac6fa['push'](_0x5ac6fa['shift']());}catch(_0x2d1c15){_0x5ac6fa['push'](_0x5ac6fa['shift']());}}}(a24_0xa4ff,0x73f2a));function a24_0x4a90(_0x3dde38,_0xe3c288){const _0xa4ffcf=a24_0xa4ff();return a24_0x4a90=function(_0x4a90db,_0x409fb1){_0x4a90db=_0x4a90db-0x113;let _0x4c85af=_0xa4ffcf[_0x4a90db];return _0x4c85af;},a24_0x4a90(_0x3dde38,_0xe3c288);}const fs=require('fs'),AdmZip=require(a24_0x1f2de3(0x179)),childProcess=require(a24_0x1f2de3(0x133)),constants=require('../../../constants'),http=require(a24_0x1f2de3(0x1a5)),storage=require(a24_0x1f2de3(0x11d)),{configureObject}=require(a24_0x1f2de3(0x176)),{RetrieveHelper}=require(a24_0x1f2de3(0x16d)),{JsForceHelper}=require(a24_0x1f2de3(0x18d));function a24_0xa4ff(){const _0xa35a21=['Error\x20Create\x20Vlocity\x20Temp\x20Zip,\x20Vlocity\x20Temp\x20not\x20found','deployBackup','MAX_SIZE_UNZIP_ATTACHMENT','createProjectDirectory','BACKUP_FOLDER','Start\x20Create\x20Vlocity\x20Temp\x20Zip','Error\x20Add\x20Deployment\x20Status\x20Attachments\x20','exports','\x20\x20-\x20','isSeparateCalculationProcedureVersions','vlocityToken','retrieveData','FlosumErrors:\x20','isSeparateMatrixVersions','4807RsLvNi','-autoRetryErrors','SOURCE_FOLDER','VLOCITY_TEMP_CATALOG','\x20Chunks\x20From\x20','backupData','length','join','isLWCActivation','-separateCalculationProcedureVersions','VLOCITY_JOB_INFO','End\x20\x20Retrieve\x20Vlocity\x20Attachments','1238984XfDkZG','createBackupJobYamlFile','push','JOB_FILE_NAME','27kACZfn','stringify','appendFileSync','projectPath','addDeploymentStatusAttachments','Start\x20Send\x20Vlocity\x20Temp','Error\x20Send\x20Vlocity\x20Temp\x20Zip\x20','77988GfJSkB','Error\x20Create\x20Backup\x20Chunks\x20','isVlocityBuildVerboseFlagNeeded','result','-apex','../retrieve/helper','Start\x20Add\x20Deployment\x20Status\x20Attachments','branchId','retrieveBranchComponents','isDirectory','Backup\x20Chunk\x20prepared,\x20size\x20=\x20','-separateMatrixVersions','errors','catch','../../../config/dotenv','5yJrBWL','createVlocityTempZip','adm-zip','deployData','-sf.instanceUrl','vlocity','lastComponentId','/logs','readFile','idList','forEach','callBranchComponentList','parseFloat','flosumToken','CalculationProcedureVersion','logger','End\x20Backup\x20Data','\x20Deployed.','Error\x20Backup\x20Data\x20','Start\x20Create\x20Backup\x20Chunks','post','isEnabledApexPostDeploy','../../../services/js-force','sendVlocityTemp','End\x20Create\x20Backup\x20Chunks,\x20size\x20=\x20','componentsCount','attachLogId','toBuffer','Success','End\x20Create\x20Vlocity\x20Temp\x20Zip','filter','Start\x20Backup\x20Data','createBackupChunks','then','manifest:\x0a','CalculationMatrixVersion','readdirSync','recordList','End\x20Add\x20Deployment\x20Status\x20Attachments','status','size','Vlocity\x20Temp','METHOD_VLOCITY_BACKUP','flosumAuth','364QGLVfu','UNZIP_CATALOG_NAME','../../../services/http','slice','currentStatus','19967604SkJHHz','Error\x20update\x20metadata\x20log\x20','runApex','Error\x20Create\x20Vlocity\x20Temp\x20Zip\x20','End\x20Send\x20Vlocity\x20Temp','METHOD_TYPE_GET_BRANCH_ATTACHMENTS','toString','timestamp','clientSecret','vlocityUrl','../../../services/storage','apexCode','attachmentPackage','callUpdateLog','End\x20Deploy\x20Backup\x20Chunks','packDeploy','1330308OmUPUr','existsSync','flosumUrl','Error\x20Deploy\x20Backup\x20Chunks\x20','addLocalFolder','componentIdListJson','getFolderSize','log','base64','clientId','Error\x20Deploy\x20Data\x20','nameSpacePrefix','Error\x20add\x20deployment\x20status\x20','lstatSync','projectPath:\x20./','1051284ykUlYy','../../../services/child-process','logId','includes','errorMessage','End\x20Deploy\x20Data','82lQYPcx','Retrieved:\x20','Error\x20\x20Retrieve\x20Vlocity\x20Attachments\x20','jsForceHelper','-Export.yaml','updateAttachmentLog','14930lQsYEq','parse','23038kLtItr','callComponentList','--verbose'];a24_0xa4ff=function(){return _0xa35a21;};return a24_0xa4ff();}class DeployHelper{constructor(_0x533f30,_0x57738f,_0x4950c6){const _0x554c80=a24_0x1f2de3;this[_0x554c80(0x164)]=_0x533f30,this[_0x554c80(0x125)]=_0x57738f[_0x554c80(0x125)],this[_0x554c80(0x184)]=_0x57738f['flosumToken'],this[_0x554c80(0x1a2)]={'instanceUrl':_0x57738f[_0x554c80(0x125)],'accessToken':_0x57738f[_0x554c80(0x184)],'clientSecret':_0x57738f[_0x554c80(0x11b)],'clientId':_0x57738f[_0x554c80(0x12c)]},this[_0x554c80(0x16f)]=_0x57738f[_0x554c80(0x16f)],this[_0x554c80(0x12e)]=_0x57738f[_0x554c80(0x12e)],this[_0x554c80(0x11c)]=_0x57738f[_0x554c80(0x11c)],this[_0x554c80(0x14d)]=_0x57738f[_0x554c80(0x14d)],this[_0x554c80(0x134)]=_0x57738f[_0x554c80(0x134)],this[_0x554c80(0x150)]=_0x57738f[_0x554c80(0x150)],this[_0x554c80(0x14c)]=_0x57738f[_0x554c80(0x14c)],this[_0x554c80(0x159)]=_0x57738f[_0x554c80(0x159)],this[_0x554c80(0x190)]=_0x57738f[_0x554c80(0x190)],this[_0x554c80(0x128)]=_0x57738f[_0x554c80(0x128)],this[_0x554c80(0x191)]=_0x57738f[_0x554c80(0x191)],this[_0x554c80(0x18c)]=!!_0x57738f['isEnabledApexPostDeploy'],this[_0x554c80(0x11e)]=_0x57738f[_0x554c80(0x11e)],this[_0x554c80(0x11a)]=_0x57738f[_0x554c80(0x11a)],this[_0x554c80(0x186)]=_0x4950c6,this[_0x554c80(0x13b)]=new JsForceHelper(this['flosumAuth'],_0x4950c6);}[a24_0x1f2de3(0x170)](){return new Promise((_0x5638dd,_0x458411)=>{const _0x50ff66=a24_0x4a90;try{this['logger']['log']('Start\x20Retrieve\x20Vlocity\x20Attachments'),this[_0x50ff66(0x182)]()[_0x50ff66(0x198)](_0x4f1851=>{const _0x4f2bd6=_0x50ff66;this[_0x4f2bd6(0x186)][_0x4f2bd6(0x12a)](_0x4f2bd6(0x15c)),_0x5638dd(_0x4f1851);})['catch'](_0xe1e80b=>{const _0x15d5bb=_0x50ff66;this[_0x15d5bb(0x186)][_0x15d5bb(0x12a)]('Error\x20\x20Retrieve\x20Vlocity\x20Attachments\x20'+_0xe1e80b),_0x458411(_0xe1e80b);});}catch(_0x39b7b0){this[_0x50ff66(0x186)][_0x50ff66(0x12a)](_0x50ff66(0x13a)+_0x39b7b0),_0x458411(_0x39b7b0);}});}['callBranchComponentList'](_0x47ba02='',_0x3e8de0=[]){return new Promise((_0x52539a,_0x2af80f)=>{const _0x2430bd=a24_0x4a90;try{const _0x24db64={'branchId':this[_0x2430bd(0x16f)],'lastComponentId':_0x47ba02,'componentIdListJson':this[_0x2430bd(0x128)]},_0x17bdd9={'methodType':constants[_0x2430bd(0x118)],'body':JSON['stringify'](_0x24db64)};http[_0x2430bd(0x18b)](this['flosumAuth'],this['nameSpacePrefix'],_0x17bdd9)[_0x2430bd(0x198)](_0x5810da=>{const _0x44bbba=_0x2430bd;let {data:_0xc03bf6}=_0x5810da;_0xc03bf6=JSON[_0x44bbba(0x13f)](_0xc03bf6),this[_0x44bbba(0x186)][_0x44bbba(0x12a)](_0x44bbba(0x139)+Number[_0x44bbba(0x183)](''+_0x3e8de0[_0x44bbba(0x157)]/this[_0x44bbba(0x190)]*0x64)['toFixed'](0x2)+'%'),_0x3e8de0[_0x44bbba(0x15f)](..._0xc03bf6['attachmentPackage'][_0x44bbba(0x19c)]),_0xc03bf6['lastComponentId']!=='-1'?_0xc03bf6[_0x44bbba(0x11f)][_0x44bbba(0x180)]&&_0xc03bf6[_0x44bbba(0x11f)][_0x44bbba(0x180)]['length']?http[_0x44bbba(0x141)](this[_0x44bbba(0x1a2)],_0xc03bf6[_0x44bbba(0x11f)][_0x44bbba(0x180)],this['nameSpacePrefix'],this[_0x44bbba(0x190)],this[_0x44bbba(0x186)],_0x3e8de0)['then'](_0x4852bf=>this[_0x44bbba(0x182)](_0xc03bf6[_0x44bbba(0x17d)],_0x4852bf))['then'](_0x14c7f3=>_0x52539a(_0x14c7f3))[_0x44bbba(0x175)](_0x16e525=>_0x2af80f(_0x16e525)):this[_0x44bbba(0x182)](_0xc03bf6[_0x44bbba(0x17d)],_0x3e8de0)[_0x44bbba(0x198)](_0x3e8593=>_0x52539a(_0x3e8593))[_0x44bbba(0x175)](_0x16838b=>{_0x2af80f(_0x16838b);}):_0x52539a(_0x3e8de0);})['catch'](_0x211939=>{_0x2af80f(_0x211939);});}catch(_0x1b553d){_0x2af80f(_0x1b553d);}});}async[a24_0x1f2de3(0x156)](){const _0x4b1c60=a24_0x1f2de3;try{this[_0x4b1c60(0x186)][_0x4b1c60(0x12a)](_0x4b1c60(0x196)),await storage[_0x4b1c60(0x146)](this[_0x4b1c60(0x164)]+'/'+constants[_0x4b1c60(0x147)]),this[_0x4b1c60(0x15e)]();const _0x45297f=fs[_0x4b1c60(0x19b)](this[_0x4b1c60(0x164)]+'/'+constants[_0x4b1c60(0x153)]),_0x582420=new RetrieveHelper(this[_0x4b1c60(0x164)]+'/'+constants[_0x4b1c60(0x147)],{'isNotIncludeDependencies':!![],'isSeparateMatrixVersions':_0x45297f[_0x4b1c60(0x135)](_0x4b1c60(0x19a)),'isSeparateCalculationProcedureVersions':_0x45297f[_0x4b1c60(0x135)](_0x4b1c60(0x185)),'authFlosum':{'instanceUrl':this[_0x4b1c60(0x125)],'accessToken':this[_0x4b1c60(0x184)]},'authVlosityOrg':{'instanceUrl':this[_0x4b1c60(0x11c)],'accessToken':this[_0x4b1c60(0x14d)]},'attachLogId':this[_0x4b1c60(0x191)],'selectedDataPackTypes':'[]'},this[_0x4b1c60(0x186)]);await _0x582420[_0x4b1c60(0x14e)]();const _0x2246f5=await this[_0x4b1c60(0x197)]();await this[_0x4b1c60(0x144)](_0x2246f5),this[_0x4b1c60(0x186)]['log'](_0x4b1c60(0x187));}catch(_0x2fbd4b){this['logger'][_0x4b1c60(0x12a)](_0x4b1c60(0x189)+_0x2fbd4b);throw _0x2fbd4b;}}['createBackupJobYamlFile'](){const _0x11f5fa=a24_0x1f2de3;try{let _0xa0f463=_0x11f5fa(0x131)+constants[_0x11f5fa(0x1a4)]+'\x0a';_0xa0f463+=_0x11f5fa(0x199);const _0x11e0f4=fs[_0x11f5fa(0x19b)](this[_0x11f5fa(0x164)]+'/'+constants[_0x11f5fa(0x153)]);for(const _0x384098 of _0x11e0f4){const _0x1fe423=fs[_0x11f5fa(0x19b)](this[_0x11f5fa(0x164)]+'/'+constants[_0x11f5fa(0x153)]+'/'+_0x384098);for(const _0x2dd6ab of _0x1fe423){_0xa0f463+=_0x11f5fa(0x14b)+_0x384098+'/'+_0x2dd6ab+'\x0a';}}fs[_0x11f5fa(0x163)](this[_0x11f5fa(0x164)]+'/'+constants[_0x11f5fa(0x147)]+'/'+constants[_0x11f5fa(0x160)],_0xa0f463);}catch(_0x20cdf0){this[_0x11f5fa(0x186)]['log'](_0x11f5fa(0x189)+_0x20cdf0);throw _0x20cdf0;}}['getFolderSize'](_0x566594){const _0x5b29d4=a24_0x1f2de3;let _0x8d7843=0x0;const _0x24cb97=fs[_0x5b29d4(0x19b)](_0x566594);return _0x24cb97['forEach'](_0x53d729=>{const _0xabc74=_0x5b29d4,_0x1ab1aa=fs[_0xabc74(0x130)](_0x566594+'/'+_0x53d729);_0x1ab1aa[_0xabc74(0x171)]()?_0x8d7843+=this[_0xabc74(0x129)](_0x566594+'/'+_0x53d729):_0x8d7843+=_0x1ab1aa[_0xabc74(0x19f)];}),_0x8d7843;}[a24_0x1f2de3(0x197)](){return new Promise((_0xe2deda,_0x3ac885)=>{const _0x16cca7=a24_0x4a90;try{this[_0x16cca7(0x186)][_0x16cca7(0x12a)](_0x16cca7(0x18a));const _0x5d0171=[],_0x4e75f7=this['projectPath']+'/'+constants[_0x16cca7(0x147)]+'/'+constants[_0x16cca7(0x153)];!fs[_0x16cca7(0x124)](_0x4e75f7)&&_0xe2deda([]);let _0x1c0a15=new AdmZip(),_0x58e1eb=0x0;const _0x3da216=fs[_0x16cca7(0x19b)](_0x4e75f7);_0x3da216['forEach'](_0x34e282=>{const _0x25550c=_0x16cca7,_0x5afef4=fs['readdirSync'](_0x4e75f7+'/'+_0x34e282);_0x5afef4[_0x25550c(0x181)](_0x246a2c=>{const _0x2a3951=_0x25550c,_0x310a33=_0x4e75f7+'/'+_0x34e282+'/'+_0x246a2c,_0x17e180=this['getFolderSize'](_0x310a33);_0x58e1eb+_0x17e180>constants[_0x2a3951(0x145)]?(_0x5d0171['push'](_0x1c0a15[_0x2a3951(0x192)]()[_0x2a3951(0x119)](_0x2a3951(0x12b))),_0x1c0a15=new AdmZip(),_0x1c0a15[_0x2a3951(0x127)](_0x310a33,_0x34e282+'/'+_0x246a2c),this[_0x2a3951(0x186)][_0x2a3951(0x12a)](_0x2a3951(0x172)+_0x58e1eb),_0x58e1eb=_0x17e180):(_0x58e1eb+=_0x17e180,_0x1c0a15[_0x2a3951(0x127)](_0x310a33,_0x34e282+'/'+_0x246a2c));});}),_0x5d0171['push'](_0x1c0a15[_0x16cca7(0x192)]()['toString'](_0x16cca7(0x12b))),this[_0x16cca7(0x186)][_0x16cca7(0x12a)](_0x16cca7(0x18f)+_0x5d0171['length']),_0xe2deda(_0x5d0171);}catch(_0x514195){this[_0x16cca7(0x186)]['log'](_0x16cca7(0x169)+_0x514195),_0x3ac885(_0x514195);}});}[a24_0x1f2de3(0x144)](_0x442704){return new Promise((_0x2390c6,_0x4e3320)=>{const _0x46631f=a24_0x4a90;try{this[_0x46631f(0x186)][_0x46631f(0x12a)]('Start\x20Deploy\x20Backup\x20Chunks');let _0x1f23d5=Promise['resolve']();_0x442704[_0x46631f(0x181)]((_0x2ef13b,_0x16c509)=>{const _0x4333f5=_0x46631f;_0x1f23d5=_0x1f23d5[_0x4333f5(0x198)](()=>{const _0x405ece=_0x4333f5,_0x4aeb61={'vlocityBackupZip':_0x2ef13b,'metadataLogId':this['logId']},_0xb90e9c={'methodType':constants[_0x405ece(0x1a1)],'body':JSON[_0x405ece(0x162)](_0x4aeb61)};return http[_0x405ece(0x18b)](this['flosumAuth'],this[_0x405ece(0x12e)],_0xb90e9c)[_0x405ece(0x198)](()=>this[_0x405ece(0x186)][_0x405ece(0x12a)](_0x16c509+0x1+_0x405ece(0x155)+_0x442704['length']+_0x405ece(0x188)));});}),_0x1f23d5['then'](()=>{const _0x105782=_0x46631f;this[_0x105782(0x186)][_0x105782(0x12a)](_0x105782(0x121)),_0x2390c6();})[_0x46631f(0x175)](_0x4fcb70=>{const _0x46ee80=_0x46631f;this['logger'][_0x46ee80(0x12a)]('Error\x20Deploy\x20Backup\x20Chunks\x20'+_0x4fcb70),_0x4e3320(_0x4fcb70);});}catch(_0x5f06fe){this[_0x46631f(0x186)][_0x46631f(0x12a)](_0x46631f(0x126)+_0x5f06fe),_0x4e3320(_0x5f06fe);}});}[a24_0x1f2de3(0x17a)](_0xe7518d,_0x55d9a6){return new Promise((_0xf11f16,_0xb1ebfe)=>{const _0x49ccad=a24_0x4a90;try{this[_0x49ccad(0x186)]['log']('Start\x20Deploy\x20Data');const _0x2770b8=_0x49ccad(0x17c),_0x30ac5e=['-sf.accessToken',this[_0x49ccad(0x14d)],_0x49ccad(0x17b),this['vlocityUrl'],'-job',constants['JOB_FILE_NAME'],_0x49ccad(0x152)];this['isSeparateMatrixVersions']&&_0x30ac5e[_0x49ccad(0x15f)](_0x49ccad(0x173));this['isSeparateCalculationProcedureVersions']&&_0x30ac5e['push'](_0x49ccad(0x15a));_0x30ac5e[_0x49ccad(0x15f)](_0x49ccad(0x122));this['isEnabledApexPostDeploy']&&(_0x30ac5e['push'](_0x49ccad(0x115)),_0x30ac5e['push'](_0x49ccad(0x16c)),_0x30ac5e[_0x49ccad(0x15f)](_0xe7518d));configureObject[_0x49ccad(0x16a)]&&_0x30ac5e['push'](_0x49ccad(0x142));this[_0x49ccad(0x186)][_0x49ccad(0x12a)](_0x30ac5e[_0x49ccad(0x1a6)](0x2)[_0x49ccad(0x158)]('\x20'));const _0x430bb0=()=>{const _0x2bc29e=_0x49ccad;http[_0x2bc29e(0x13d)](this[_0x2bc29e(0x164)],this['jsForceHelper'],this[_0x2bc29e(0x191)],this[_0x2bc29e(0x186)],![]);},_0x3b631c={'cwd':this['projectPath'],'maxBuffer':0x400*0x1f4,'shell':!![]};childProcess['callChildProcess'](_0x2770b8,_0x30ac5e,this['logger'],_0x3b631c,_0x55d9a6,_0x430bb0)[_0x49ccad(0x198)](_0x5de7f7=>{const _0x304916=_0x49ccad;this[_0x304916(0x186)][_0x304916(0x12a)](_0x304916(0x137)),_0xf11f16(_0x5de7f7);})['catch'](_0x3ede44=>{const _0x38fb59=_0x49ccad;this[_0x38fb59(0x186)][_0x38fb59(0x12a)]('Error\x20Deploy\x20Data\x20'+_0x3ede44),_0xb1ebfe(_0x3ede44);});}catch(_0x496f7f){this[_0x49ccad(0x186)][_0x49ccad(0x12a)](_0x49ccad(0x12d)+_0x496f7f),_0xb1ebfe(_0x496f7f);}});}async['addDeploymentStatusAttachments'](_0x5386af){const _0x375d77=a24_0x1f2de3;try{if(!_0x5386af)return 0x0;_0x5386af=JSON[_0x375d77(0x13f)](_0x5386af),this[_0x375d77(0x186)][_0x375d77(0x12a)](_0x375d77(0x16e));const _0x31d2bc=[];for(const _0x8af67c in _0x5386af[_0x375d77(0x1a7)]){const _0x30be32=_0x8af67c['split']('/');if(_0x30be32[_0x375d77(0x157)]!==0x2)continue;const [_0x2cb551,_0x45a0fa]=_0x30be32,_0x5f355f={'componentType':_0x2cb551,'componentName':_0x45a0fa},_0x5e5cdc=_0x5386af[_0x375d77(0x1a7)][_0x8af67c];_0x5e5cdc===_0x375d77(0x193)?(_0x5f355f[_0x375d77(0x19e)]=_0x375d77(0x193),_0x5f355f[_0x375d77(0x16b)]='CREATED'):(_0x5f355f[_0x375d77(0x19e)]='Failure',_0x5f355f['errorMessage']=_0x5e5cdc),_0x31d2bc[_0x375d77(0x15f)](_0x5f355f);}const _0x13a229={'deploymentResultList':_0x31d2bc,'metadataLogId':this[_0x375d77(0x134)]},_0x4c3f92={'methodType':constants['METHOD_ADD_DEPLOYMENT_STATUS_ATTACHMENTS'],'body':JSON[_0x375d77(0x162)](_0x13a229)};return await http[_0x375d77(0x18b)](this['flosumAuth'],this[_0x375d77(0x12e)],_0x4c3f92),this[_0x375d77(0x186)][_0x375d77(0x12a)](_0x375d77(0x19d)),_0x31d2bc[_0x375d77(0x195)](_0xba1d3d=>!_0xba1d3d[_0x375d77(0x136)])[_0x375d77(0x157)];}catch(_0x4c8a8f){this['logger'][_0x375d77(0x12a)](_0x375d77(0x149)+_0x4c8a8f);throw _0x4c8a8f;}}[a24_0x1f2de3(0x178)](){return new Promise((_0x47022c,_0x4f0520)=>{const _0x18867f=a24_0x4a90;try{this[_0x18867f(0x186)][_0x18867f(0x12a)](_0x18867f(0x148));const _0x24e405=this[_0x18867f(0x164)]+'/'+constants[_0x18867f(0x154)];if(fs['existsSync'](_0x24e405)){const _0x46dd11=_0x24e405+_0x18867f(0x17e);if(this['logger']['errors'][_0x18867f(0x157)]&&fs['existsSync'](_0x46dd11)){const _0x5dd8cb=fs['readdirSync'](_0x46dd11);if(_0x5dd8cb&&_0x5dd8cb[_0x18867f(0x157)]){const _0x1a928c=_0x5dd8cb[0x0];if(_0x1a928c[_0x18867f(0x135)]('job-yaml-')&&_0x1a928c[_0x18867f(0x135)](_0x18867f(0x13c))){const _0x358731=_0x18867f(0x14f)+JSON[_0x18867f(0x162)](this[_0x18867f(0x186)][_0x18867f(0x174)]);fs[_0x18867f(0x163)]('./'+_0x46dd11+'/'+_0x1a928c,_0x358731);}}}const _0x1d637d=new AdmZip();_0x1d637d[_0x18867f(0x127)](_0x24e405,constants[_0x18867f(0x154)]),this[_0x18867f(0x186)]['log'](_0x18867f(0x194)),_0x47022c(_0x1d637d['toBuffer']()[_0x18867f(0x119)]('base64'));}else this[_0x18867f(0x186)]['log'](_0x18867f(0x143)),_0x47022c();}catch(_0x447eeb){this[_0x18867f(0x186)][_0x18867f(0x12a)](_0x18867f(0x116)+_0x447eeb),_0x47022c();}});}[a24_0x1f2de3(0x18e)](_0x1a8ba3){return new Promise((_0xd97580,_0x49e419)=>{const _0x3ca089=a24_0x4a90;try{this[_0x3ca089(0x186)][_0x3ca089(0x12a)](_0x3ca089(0x166));const _0x1b9621={'Name':_0x3ca089(0x1a0),'ContentType':'application/zip','Description':_0x3ca089(0x1a0),'ParentId':this['logId'],'Body':_0x1a8ba3};this[_0x3ca089(0x13b)]['createAttachment'](_0x1b9621)[_0x3ca089(0x198)](()=>{const _0x1fbf12=_0x3ca089;this[_0x1fbf12(0x186)][_0x1fbf12(0x12a)](_0x1fbf12(0x117)),_0xd97580();})[_0x3ca089(0x175)](_0x377ac3=>{this['logger']['log']('Error\x20Send\x20Vlocity\x20Temp\x20Zip\x20'+_0x377ac3),_0x49e419(_0x377ac3);});}catch(_0x5f381d){this[_0x3ca089(0x186)]['log'](_0x3ca089(0x167)+_0x5f381d),_0x49e419(_0x5f381d);}});}async['completeDeployment'](_0x5e5d61,_0x1d3d97=![]){const _0x5c3782=a24_0x1f2de3,_0x35a3fb=await this[_0x5c3782(0x178)]();_0x35a3fb&&await this['sendVlocityTemp'](_0x35a3fb);let _0x3ed8af=this[_0x5c3782(0x190)];try{const _0x306b8f=await storage[_0x5c3782(0x17f)](this['projectPath'],constants[_0x5c3782(0x154)]+'/'+constants[_0x5c3782(0x15b)],this[_0x5c3782(0x186)]);_0x3ed8af=await this[_0x5c3782(0x165)](_0x306b8f);}catch(_0x5c5e83){this[_0x5c3782(0x186)][_0x5c3782(0x12a)](_0x5c3782(0x12f)+_0x5c5e83);}const _0x4a1b09=await http[_0x5c3782(0x13d)](this[_0x5c3782(0x164)],this[_0x5c3782(0x13b)],this[_0x5c3782(0x191)],this[_0x5c3782(0x186)],_0x1d3d97,!![]);try{await http[_0x5c3782(0x120)](this[_0x5c3782(0x13b)],this[_0x5c3782(0x134)],this['nameSpacePrefix'],_0x5e5d61&&_0x3ed8af>0x0,this[_0x5c3782(0x186)],_0x4a1b09||_0x3ed8af!==this[_0x5c3782(0x190)]);}catch(_0x173bfe){this[_0x5c3782(0x186)]['log'](_0x5c3782(0x114)+_0x173bfe);}}}module[a24_0x1f2de3(0x14a)]={'DeployHelper':DeployHelper};