const a40_0xabe7e8=a40_0x5d68;(function(_0x42a68b,_0x5cb962){const _0x53609e=a40_0x5d68,_0x384737=_0x42a68b();while(!![]){try{const _0x16e07f=-parseInt(_0x53609e(0x27c))/0x1*(-parseInt(_0x53609e(0x288))/0x2)+-parseInt(_0x53609e(0x21a))/0x3*(parseInt(_0x53609e(0x253))/0x4)+-parseInt(_0x53609e(0x24d))/0x5+-parseInt(_0x53609e(0x21e))/0x6+parseInt(_0x53609e(0x207))/0x7*(parseInt(_0x53609e(0x225))/0x8)+-parseInt(_0x53609e(0x276))/0x9*(parseInt(_0x53609e(0x282))/0xa)+-parseInt(_0x53609e(0x1ee))/0xb*(-parseInt(_0x53609e(0x1f2))/0xc);if(_0x16e07f===_0x5cb962)break;else _0x384737['push'](_0x384737['shift']());}catch(_0x1a02bc){_0x384737['push'](_0x384737['shift']());}}}(a40_0x5787,0x79a14));function a40_0x5d68(_0x52bf8e,_0x237410){const _0x578741=a40_0x5787();return a40_0x5d68=function(_0x5d681f,_0x36a6b4){_0x5d681f=_0x5d681f-0x1e5;let _0x55d334=_0x578741[_0x5d681f];return _0x55d334;},a40_0x5d68(_0x52bf8e,_0x237410);}const fs2=require(a40_0xabe7e8(0x243)),fs=require('fs'),crc32=require(a40_0xabe7e8(0x26e)),AdmZip=require(a40_0xabe7e8(0x1e5)),yaml=require('js-yaml'),{resolve}=require('path'),path=require('path'),constants=require(a40_0xabe7e8(0x265)),childProcess=require('../../../services/child-process'),http=require('../../../services/http'),{AvailableToExportCommand}=require(a40_0xabe7e8(0x20f)),{JsForceHelper}=require(a40_0xabe7e8(0x26d)),{pathConfig}=require(a40_0xabe7e8(0x20b));function a40_0x5787(){const _0x7cf48b=['manifest:\x0a\x20-\x20','-autoRetryErrors','updateAttachmentLog','job-yaml-','End\x20Create\x20Job\x20File','projectPath:\x20./','queries:\x0a','../../../services/js-force','crc-32','packExport','forEach','Start\x20Deploy\x20Components','Error\x20deploy\x20chunk\x20','Errors','lstatSync','UNSUPPORTED_BY_DEFAULT_LIST','8276706rkSCGG','projectPath','Error\x20Deploy\x20Components\x20','UNZIP_CATALOG_NAME','vlocity','Error\x20Create\x20Job\x20File,\x20Not\x20Valid\x20Provided\x20Yaml\x20File:\x20','19211EaVUYV','createYamlByDataPackTypes','replaceAll','isAfterUpdateSearchByKey','map','readdirSync','10ZNpLxO','utf8','completeDeployment','Start\x20Send\x20Vlocity\x20Temp','has','snapshotId','64wKTzWG','logId','Vlocity\x20Temp','JOB_FILE_NAME','\x0a\x20-\x20','createAttachment','./source_data','join','isSeparateMatrixVersions','execute','isSeparateCalculationProcedureVersions','includes','readFileSync','Start\x20Create\x20Vlocity\x20Temp\x20Zip','filter','adm-zip','-job','SnapshotVlocity/','nameOfComponents','Error\x20Create\x20Vlocity\x20Temp\x20Zip,\x20Vlocity\x20Temp\x20not\x20found','errors','VLOCITY_TEMP_CATALOG','Start\x20Prepare\x20Data\x20For\x20Deploy',',\x20size\x20more\x20then\x203mb.','3672581FkgdlJ','callUpdateSnapshot','parse','searchBy','36VUQYUG','yaml','Start\x20Retrieve\x20Data','readFiles','isArray','getVlocityQueries','\x5c\x27\x27','-separateCalculationProcedureVersions','isNotIncludeDependencies','\x20FROM\x20','authFlosum','Start\x20Create\x20Job\x20File','endsWith','NAME_LOGS_FILE','attachLogId','End\x20Create\x20Vlocity\x20Temp\x20Zip','authVlosityOrg','-sf.instanceUrl','name','selectedDataPackTypes','checkErrors','102151bYHwwa','post','Deployed\x20','updateSnapshot','../../../config/path','deployComponents','startsWith','catch','../../../services/cli-commands/available-to-export.command','keys','\x0amanifest:\x0a\x20-\x20','Error\x20Create\x20Job\x20File\x20','trim','VLOCITY_NAMESPACE_PREFIX_CODE','toBuffer','appendFileSync','vlocityUrl','createQuery','push','383886ujVZve','retrieveData','dump','done','1840926gDeSaA','Records\x20to\x20export\x20not\x20a\x20found','End\x20Deploy\x20Components','value','End\x20Retrieve\x20Data','-maxDepth','type','328BhGObX','addLocalFolder','key','_DataPack.json','\x20WHERE\x20(Name\x20LIKE\x20\x27%','toLowerCase','toString','records','deploy','flosumAuth','application/zip','split','ContentVersion','resolve','Error\x20Retrieve\x20Data\x20','length','-sf.accessToken','findSubItems','createJobYamlFile','/logs','AND','existsSync','Title','stringify','prepareDataForDeploy','\x20from\x20','nameSpacePrefix','Error\x20Prepare\x20Data\x20For\x20Deploy','-Export.yaml','query','fs/promises','load','log','objectName','isLikeSearch','isRunPackRetryAutomatically','next','types','createVlocityTempZip','buf','1170515fTWhaa','isDirectory','__c','accessToken','vlocityNameSpacePrefix','replace','8MBtxIz','sendVlocityTemp','vlocityToken','jsForceHelper','Start\x20Update\x20Snapshot','End\x20Send\x20Vlocity\x20Temp','WHERE','\x20\x20query:\x20SELECT\x20','Is_Error__c','\x20WHERE\x20Name\x20IN\x20(\x27','%\x27)','logger','then','some','callUpdateLog','End\x20Prepare\x20Data\x20For\x20Deploy','-separateMatrixVersions','instanceUrl','../../../constants'];a40_0x5787=function(){return _0x7cf48b;};return a40_0x5787();}class RetrieveHelper{constructor(_0x21f982,_0x5671ef,_0x35f953){const _0x20ea8f=a40_0xabe7e8;this[_0x20ea8f(0x217)]=_0x5671ef['authVlosityOrg'][_0x20ea8f(0x264)],this[_0x20ea8f(0x255)]=_0x5671ef[_0x20ea8f(0x202)][_0x20ea8f(0x250)],this[_0x20ea8f(0x289)]=_0x5671ef[_0x20ea8f(0x289)],this[_0x20ea8f(0x200)]=_0x5671ef['attachLogId'],this[_0x20ea8f(0x277)]=_0x21f982,this[_0x20ea8f(0x22e)]=_0x5671ef[_0x20ea8f(0x1fc)],this['nameSpacePrefix']=_0x5671ef[_0x20ea8f(0x23f)],this[_0x20ea8f(0x251)]=_0x5671ef[_0x20ea8f(0x251)],this[_0x20ea8f(0x1e8)]=_0x5671ef['nameOfComponents'],this[_0x20ea8f(0x1f1)]=_0x5671ef[_0x20ea8f(0x1f1)],this[_0x20ea8f(0x247)]=_0x5671ef[_0x20ea8f(0x247)],this[_0x20ea8f(0x287)]=_0x5671ef[_0x20ea8f(0x287)],this['selectedDataPackTypes']=JSON['parse'](_0x5671ef[_0x20ea8f(0x205)]),this[_0x20ea8f(0x1fa)]=_0x5671ef[_0x20ea8f(0x1fa)],this[_0x20ea8f(0x290)]=_0x5671ef[_0x20ea8f(0x290)],this[_0x20ea8f(0x292)]=_0x5671ef[_0x20ea8f(0x292)],this[_0x20ea8f(0x27f)]=_0x5671ef[_0x20ea8f(0x27f)],this[_0x20ea8f(0x248)]=!!_0x5671ef[_0x20ea8f(0x248)],this[_0x20ea8f(0x224)]=_0x5671ef[_0x20ea8f(0x224)],this[_0x20ea8f(0x210)]=_0x5671ef[_0x20ea8f(0x210)],this[_0x20ea8f(0x25e)]=_0x35f953,this['jsForceHelper']=new JsForceHelper(this['flosumAuth'],_0x35f953);}async[a40_0xabe7e8(0x27d)](){const _0x43c804=a40_0xabe7e8,_0x122524=await new AvailableToExportCommand({'vlocityAuth':{'instanceUrl':this[_0x43c804(0x217)],'accessToken':this['vlocityToken']},'logger':this[_0x43c804(0x25e)]})[_0x43c804(0x291)]();if(!_0x122524?.['records']?.[_0x43c804(0x234)])throw new Error(_0x43c804(0x21f));const _0x1240de=this[_0x43c804(0x1e8)]['split'](';')['map'](_0x4a11e3=>_0x4a11e3[_0x43c804(0x22a)]()),_0x11cc7f=new Set(this['selectedDataPackTypes']),_0x3fb35c=[];for(const {VlocityDataPackType:_0x465b32,Name:_0x1e5c29,VlocityDataPackDisplayLabel:_0x4fc118,VlocityDataPackKey:_0x39c76a}of _0x122524[_0x43c804(0x22c)]){if(!_0x11cc7f[_0x43c804(0x286)](_0x465b32))continue;const _0xcdce82=_0x1e5c29?.[_0x43c804(0x22a)]()||'',_0x370578=_0x4fc118?.[_0x43c804(0x22a)]()||'',_0x599a27=_0x39c76a?.['toLowerCase']()||'';(_0x1240de[_0x43c804(0x260)](_0x3125d7=>_0xcdce82['includes'](_0x3125d7))||_0x1240de[_0x43c804(0x260)](_0x49bfe2=>_0x370578[_0x43c804(0x293)](_0x49bfe2))||_0x1240de[_0x43c804(0x260)](_0x13efc4=>_0x599a27[_0x43c804(0x293)](_0x13efc4)))&&_0x3fb35c[_0x43c804(0x219)]('\x27'+_0x39c76a[_0x43c804(0x27e)]('\x27','\x5c\x27\x27')+'\x27');}const _0xd4b23c=_0x43c804(0x26b)+constants[_0x43c804(0x279)]+_0x43c804(0x211)+_0x3fb35c[_0x43c804(0x28f)](_0x43c804(0x28c));fs[_0x43c804(0x216)](this[_0x43c804(0x277)]+'/'+constants[_0x43c804(0x28b)],_0xd4b23c),this['logger'][_0x43c804(0x245)](_0x43c804(0x26a));}[a40_0xabe7e8(0x237)](){return new Promise((_0x4c9344,_0x2d5e52)=>{const _0x174f76=a40_0x5d68;try{this[_0x174f76(0x25e)]['log'](_0x174f76(0x1fd));let _0x4bc72b;if(this['type']==='selective'&&this['keys']?.[_0x174f76(0x234)]){const _0x46621d=this['keys']['map'](_0xe644af=>'\x27'+_0xe644af[_0x174f76(0x27e)]('\x27',_0x174f76(0x1f8))+'\x27');_0x4bc72b=_0x174f76(0x26b)+constants[_0x174f76(0x279)]+_0x174f76(0x211)+_0x46621d[_0x174f76(0x28f)](_0x174f76(0x28c)),fs[_0x174f76(0x216)](this['projectPath']+'/'+constants['JOB_FILE_NAME'],_0x4bc72b),this[_0x174f76(0x25e)][_0x174f76(0x245)](_0x174f76(0x26a)),_0x4c9344();return;}if(this[_0x174f76(0x224)]===_0x174f76(0x24a)){this[_0x174f76(0x27d)]()[_0x174f76(0x25f)](()=>_0x4c9344())[_0x174f76(0x20e)](_0x5f5632=>{const _0x59be2b=_0x174f76;this['logger'][_0x59be2b(0x245)]('Error\x20Create\x20Job\x20File'),_0x2d5e52(_0x5f5632);});return;}_0x4bc72b=_0x174f76(0x26b)+constants[_0x174f76(0x279)]+'\x0a';if(this[_0x174f76(0x27f)]){if(this[_0x174f76(0x1e8)]){if(this['searchBy']===_0x174f76(0x227)){const _0x68c971=this[_0x174f76(0x1e8)][_0x174f76(0x230)]('\x0a')[_0x174f76(0x296)](_0x2959b5=>_0x2959b5[_0x174f76(0x213)]()[_0x174f76(0x20d)]('-'))[_0x174f76(0x280)](_0x2b29a1=>_0x2b29a1['replace']('-','')[_0x174f76(0x213)]());_0x68c971[_0x174f76(0x234)]?(_0x4bc72b+=_0x174f76(0x266),_0x4bc72b+=_0x68c971[_0x174f76(0x28f)](_0x174f76(0x28c)),fs['appendFileSync'](this[_0x174f76(0x277)]+'/'+constants[_0x174f76(0x28b)],_0x4bc72b),this[_0x174f76(0x25e)][_0x174f76(0x245)](_0x174f76(0x26a)),_0x4c9344()):_0x2d5e52('Error,\x20Components\x20not\x20found');}if(this[_0x174f76(0x1f1)]===_0x174f76(0x1f3))try{const _0x37b819=yaml[_0x174f76(0x244)](this[_0x174f76(0x1e8)]);_0x37b819[_0x174f76(0x277)]=_0x174f76(0x28e),fs[_0x174f76(0x216)](this[_0x174f76(0x277)]+'/'+constants[_0x174f76(0x28b)],yaml[_0x174f76(0x21c)](_0x37b819)),_0x4c9344(),this[_0x174f76(0x25e)][_0x174f76(0x245)](_0x174f76(0x26a));}catch(_0x2b216a){this[_0x174f76(0x25e)][_0x174f76(0x245)](_0x174f76(0x27b)+_0x2b216a),_0x2d5e52(_0x2b216a);}else _0x4bc72b+=_0x174f76(0x26c)+this[_0x174f76(0x1f7)](),fs[_0x174f76(0x216)](this['projectPath']+'/'+constants['JOB_FILE_NAME'],_0x4bc72b),_0x4c9344(),this[_0x174f76(0x25e)][_0x174f76(0x245)](_0x174f76(0x26a));}else _0x4bc72b+=_0x174f76(0x26c)+this[_0x174f76(0x1f7)](),fs[_0x174f76(0x216)](this['projectPath']+'/'+constants[_0x174f76(0x28b)],_0x4bc72b),_0x4c9344(),this[_0x174f76(0x25e)][_0x174f76(0x245)](_0x174f76(0x26a));}else _0x4bc72b+=_0x174f76(0x26c)+this['getVlocityQueries'](),fs[_0x174f76(0x216)](this[_0x174f76(0x277)]+'/'+constants[_0x174f76(0x28b)],_0x4bc72b),_0x4c9344(),this[_0x174f76(0x25e)][_0x174f76(0x245)](_0x174f76(0x26a));}catch(_0x20cbd2){this[_0x174f76(0x25e)][_0x174f76(0x245)](_0x174f76(0x212)+_0x20cbd2),_0x2d5e52(_0x20cbd2);}});}[a40_0xabe7e8(0x1f7)](){const _0x15d779=a40_0xabe7e8,_0x4d358a=Array[_0x15d779(0x1f6)](this[_0x15d779(0x205)])?this[_0x15d779(0x205)]:Object[_0x15d779(0x210)](this['selectedDataPackTypes']),_0x1916aa=[];/^ *$/['test'](this[_0x15d779(0x1e8)])?this[_0x15d779(0x1e8)]=[]:this['nameOfComponents']=this['nameOfComponents']['split'](';');if(this[_0x15d779(0x1e8)][_0x15d779(0x234)]){const _0x1da814=this[_0x15d779(0x247)]?this[_0x15d779(0x1e8)][_0x15d779(0x28f)]('%\x27\x20OR\x20Name\x20LIKE\x20\x27%'):this[_0x15d779(0x1e8)][_0x15d779(0x28f)]('\x27,\x27');for(const _0x11f717 of _0x4d358a){_0x1916aa[_0x15d779(0x219)](this[_0x15d779(0x218)](_0x11f717,_0x1da814));}}else for(const _0x1ae156 of _0x4d358a){const _0x165b93=constants[_0x15d779(0x275)]['includes'](_0x1ae156)?this[_0x15d779(0x218)](_0x1ae156):'-\x20'+_0x1ae156;_0x1916aa[_0x15d779(0x219)](_0x165b93);}return _0x1916aa['join']('\x0a');}['createQuery'](_0x5634a2,_0x31246f=null){const _0xca9afb=a40_0xabe7e8,_0x36977f=constants['DATA_PACK_TYPES_QUERIES_MAP'][_0x5634a2];let _0x489db5='';if(_0x36977f){const _0x533059=_0x36977f[_0xca9afb(0x246)][_0xca9afb(0x1fe)](_0xca9afb(0x24f))&&!!this[_0xca9afb(0x251)]?''+this[_0xca9afb(0x251)]+_0x36977f['objectName']:''+_0x36977f['objectName'];_0x489db5='-\x20VlocityDataPackType:\x20'+_0x5634a2+'\x0a';const _0x56780f=_0x36977f['fields'][_0xca9afb(0x252)](new RegExp(constants[_0xca9afb(0x214)],'g'),this['vlocityNameSpacePrefix']);this[_0xca9afb(0x247)]?(_0x489db5+=_0xca9afb(0x25a)+_0x56780f+_0xca9afb(0x1fb)+_0x533059,_0x31246f&&(_0x489db5+=_0xca9afb(0x229)+_0x31246f+_0xca9afb(0x25d))):(_0x489db5+=_0xca9afb(0x25a)+_0x56780f+'\x20FROM\x20'+_0x533059,_0x31246f&&(_0x489db5+=_0xca9afb(0x25c)+_0x31246f+'\x27)'));if(_0x36977f[_0xca9afb(0x242)]){const _0x1fe81a=_0x31246f?_0xca9afb(0x239):_0xca9afb(0x259),_0x23ec4f=_0x36977f['query'][_0xca9afb(0x252)](new RegExp(constants['VLOCITY_NAMESPACE_PREFIX_CODE'],'g'),this['vlocityNameSpacePrefix']);_0x489db5+='\x20'+_0x1fe81a+'\x20'+_0x23ec4f+'\x0a';}else _0x489db5+='\x0a';}return _0x489db5;}[a40_0xabe7e8(0x21b)](){return new Promise((_0x10668f,_0x5291ed)=>{const _0x28b52c=a40_0x5d68;try{this[_0x28b52c(0x25e)]['log'](_0x28b52c(0x1f4));const _0x3dff82=_0x28b52c(0x27a),_0x4dcf5c=this['isNotIncludeDependencies']?'0':'-1',_0x848304=[_0x28b52c(0x235),''+this[_0x28b52c(0x255)],_0x28b52c(0x203),''+this[_0x28b52c(0x217)],_0x28b52c(0x1e6),''+constants[_0x28b52c(0x28b)],_0x28b52c(0x267),_0x28b52c(0x223),_0x4dcf5c];this[_0x28b52c(0x290)]&&_0x848304[_0x28b52c(0x219)](_0x28b52c(0x263));this[_0x28b52c(0x292)]&&_0x848304[_0x28b52c(0x219)](_0x28b52c(0x1f9));_0x848304[_0x28b52c(0x219)](_0x28b52c(0x26f));const _0x16c172=()=>{const _0x23f83b=_0x28b52c;http[_0x23f83b(0x268)](this[_0x23f83b(0x277)],this['jsForceHelper'],this[_0x23f83b(0x200)],this[_0x23f83b(0x25e)],![]);};this[_0x28b52c(0x25e)][_0x28b52c(0x245)](_0x848304[_0x28b52c(0x28f)]('\x20'));const _0x2dfd80={'cwd':''+this[_0x28b52c(0x277)],'maxBuffer':0x400*0x1f4,'shell':!![]};childProcess['callChildProcess'](_0x3dff82,_0x848304,this[_0x28b52c(0x25e)],_0x2dfd80,!![],_0x16c172)[_0x28b52c(0x25f)](_0x208b32=>{const _0xe27a8e=_0x28b52c;this[_0xe27a8e(0x25e)][_0xe27a8e(0x245)](_0xe27a8e(0x222)),_0x10668f(_0x208b32);})[_0x28b52c(0x20e)](_0xc8173f=>{const _0x57e9f9=_0x28b52c;this[_0x57e9f9(0x25e)][_0x57e9f9(0x245)](_0x57e9f9(0x233)+_0xc8173f),_0x5291ed(_0xc8173f);});}catch(_0x43800d){_0x5291ed(_0x43800d);}});}[a40_0xabe7e8(0x23d)](){return new Promise((_0x3f892a,_0x1e9edd)=>{const _0x134fe2=a40_0x5d68;try{this[_0x134fe2(0x25e)]['log'](_0x134fe2(0x1ec));let _0x416755=0x0,_0x5e3c6a=[],_0x4328fd=0x0;const _0x1321e7=[],_0x5eec0b=this[_0x134fe2(0x277)]+'/'+constants['UNZIP_CATALOG_NAME'],_0x3f5217=fs['readdirSync'](_0x5eec0b);for(let _0x4b85ca=0x0;_0x4b85ca<_0x3f5217['length'];_0x4b85ca++){const _0x8ee16e=_0x3f5217[_0x4b85ca]===_0x134fe2(0x231)?_0x134fe2(0x23b):'Name',_0xf5f989=_0x5eec0b+'/'+_0x3f5217[_0x4b85ca],_0x45d1a2=fs[_0x134fe2(0x281)](_0xf5f989);for(let _0x21e3b4=0x0;_0x21e3b4<_0x45d1a2['length'];_0x21e3b4++){const _0x39082e=_0x3f5217[_0x4b85ca]+'/'+_0x45d1a2[_0x21e3b4];let _0x599551=_0x45d1a2[_0x21e3b4];const _0x36a047=[],_0x3e0bfe=_0x5eec0b+'/'+_0x3f5217[_0x4b85ca]+'/'+_0x45d1a2[_0x21e3b4],_0x58dccd=fs['readdirSync'](_0x3e0bfe);_0x58dccd['forEach'](_0x2bb5f9=>{const _0x4ff467=_0x134fe2;try{_0x2bb5f9['toString']()[_0x4ff467(0x1fe)](_0x4ff467(0x228))&&(_0x599551=JSON[_0x4ff467(0x1f0)](fs['readFileSync'](_0x3e0bfe+'/'+_0x2bb5f9)[_0x4ff467(0x22b)]())[_0x8ee16e]);}catch(_0x16bec1){this['logger'][_0x4ff467(0x245)]('Error\x20parse\x20component\x20'+_0x2bb5f9);}!_0x599551&&(_0x599551=undefined),fs[_0x4ff467(0x274)](_0x3e0bfe+'/'+_0x2bb5f9['toString']())[_0x4ff467(0x24e)]()&&_0x36a047[_0x4ff467(0x219)](...this['findSubItems'](_0x3e0bfe,_0x2bb5f9));});const _0x4830a6=new AdmZip();_0x4830a6['addLocalFolder'](_0x3e0bfe,_0x3f5217[_0x4b85ca]+'/'+_0x45d1a2[_0x21e3b4]);const _0x39b0a8=_0x4830a6['toBuffer'](),_0x25ff96=crc32[_0x134fe2(0x24c)](_0x39b0a8),_0x5d827a=_0x39b0a8[_0x134fe2(0x22b)]('base64'),_0x38967d={'fileName':_0x599551,'name':_0x45d1a2[_0x21e3b4],'type':_0x3f5217[_0x4b85ca],'label':_0x39082e,'crc':_0x25ff96,'base64':_0x5d827a,'snapshotId':this['snapshotId'],'subItemList':JSON['stringify'](_0x36a047)},_0x2b988f=_0x39b0a8[_0x134fe2(0x234)]/0xf4240,_0x550f88=!!(_0x45d1a2['length']-0x1===_0x21e3b4&&_0x3f5217['length']-0x1===_0x4b85ca);_0x416755+=_0x2b988f,_0x416755>0x2||_0x5e3c6a>0xfa0?(_0x1321e7[_0x134fe2(0x219)](_0x5e3c6a),_0x2b988f<0x3?(_0x5e3c6a=[_0x38967d],_0x4328fd++,_0x416755=_0x2b988f):(this[_0x134fe2(0x25e)][_0x134fe2(0x245)]('Cannot\x20retrieve\x20component\x20'+_0x39082e+_0x134fe2(0x1ed),!![]),_0x416755=0x0)):(_0x5e3c6a[_0x134fe2(0x219)](_0x38967d),_0x4328fd++),_0x550f88&&_0x1321e7[_0x134fe2(0x219)](_0x5e3c6a);}}this[_0x134fe2(0x25e)][_0x134fe2(0x245)](_0x134fe2(0x262)),_0x3f892a({'iteratorDeploy':_0x1321e7[Symbol['iterator']](),'count':_0x4328fd});}catch(_0x1ca34b){this[_0x134fe2(0x25e)][_0x134fe2(0x245)](_0x134fe2(0x240)),_0x1e9edd(_0x1ca34b);}});}[a40_0xabe7e8(0x236)](_0x400fef,_0x4207f5,_0xda19ae='',_0x277265=[]){const _0x86b4e8=a40_0xabe7e8;_0xda19ae[_0x86b4e8(0x234)]&&(_0xda19ae='/'+_0xda19ae);const _0x466127=fs[_0x86b4e8(0x281)](_0x400fef+'/'+_0x4207f5+_0xda19ae);return _0x466127[_0x86b4e8(0x270)](_0x81baef=>{const _0x5b0e66=_0x86b4e8;!fs[_0x5b0e66(0x274)](_0x400fef+'/'+_0x4207f5+_0xda19ae+'/'+_0x81baef[_0x5b0e66(0x22b)]())['isDirectory']()?_0x277265[_0x5b0e66(0x219)](''+_0x4207f5+_0xda19ae+'/'+_0x81baef['toString']()):this[_0x5b0e66(0x236)](_0x400fef,_0x4207f5,_0x81baef,_0x277265);}),_0x277265;}[a40_0xabe7e8(0x1f5)](_0x4813e9,_0xe88f20='',_0x623832=[]){const _0x1ac553=a40_0xabe7e8,_0x5015fc=fs[_0x1ac553(0x281)](_0x4813e9,{'withFileTypes':!![]});return _0x5015fc['forEach'](_0x1e3ab0=>{const _0x462a8d=_0x1ac553,_0x5bce42=resolve(_0x4813e9,_0x1e3ab0[_0x462a8d(0x204)]);if(_0x1e3ab0[_0x462a8d(0x24e)]()){const _0x5eb02e=_0xe88f20[_0x462a8d(0x234)]?_0xe88f20+'/'+_0x1e3ab0['name']:_0x1e3ab0[_0x462a8d(0x204)];this[_0x462a8d(0x1f5)](_0x5bce42,_0x5eb02e,_0x623832);}else{let _0x171804;_0xe88f20[_0x462a8d(0x234)]?_0x171804=_0xe88f20+'/'+_0x1e3ab0[_0x462a8d(0x204)]:_0x171804=_0x1e3ab0[_0x462a8d(0x204)],_0x623832[_0x462a8d(0x219)](_0x171804);}}),_0x623832;}[a40_0xabe7e8(0x20c)](_0x52987d){return new Promise((_0x4cbfc9,_0x1ad37f)=>{const _0x2e65d2=a40_0x5d68;try{this[_0x2e65d2(0x25e)]['log'](_0x2e65d2(0x271)),this['nextChunk'](_0x52987d)['then'](()=>{const _0x24aa4a=_0x2e65d2;this[_0x24aa4a(0x25e)]['log'](_0x24aa4a(0x220)),_0x4cbfc9();})[_0x2e65d2(0x20e)](_0xd0e99c=>{const _0x60ca93=_0x2e65d2;this['logger']['log'](_0x60ca93(0x278)+_0xd0e99c),_0x1ad37f(_0xd0e99c);});}catch(_0x5ae329){_0x1ad37f(_0x5ae329);}});}['nextChunk'](_0x2766a5,_0x2d3f85=0x0){return new Promise((_0x54abfe,_0x29bd7f)=>{const _0x38b8f5=a40_0x5d68;try{const _0x12dcae=_0x2766a5['iteratorDeploy'][_0x38b8f5(0x249)]();_0x12dcae[_0x38b8f5(0x21d)]?_0x54abfe():this[_0x38b8f5(0x22d)](_0x2766a5,_0x12dcae,_0x2d3f85)[_0x38b8f5(0x25f)](()=>_0x54abfe())[_0x38b8f5(0x20e)](_0x576e6d=>_0x29bd7f(_0x576e6d));}catch(_0x4ad056){_0x29bd7f(_0x4ad056);}});}[a40_0xabe7e8(0x22d)](_0x51bb21,_0x1da77f,_0x39f25f=0x0){return new Promise((_0x5e66a9,_0x1550dd)=>{const _0x39ced9=a40_0x5d68;try{const _0x283afb={'items':_0x1da77f[_0x39ced9(0x221)]};http[_0x39ced9(0x208)](this[_0x39ced9(0x22e)],this['nameSpacePrefix'],_0x283afb,_0x39ced9(0x1e7))[_0x39ced9(0x25f)](()=>{const _0x92a673=_0x39ced9;return _0x39f25f+=_0x1da77f['value']['length'],this[_0x92a673(0x25e)][_0x92a673(0x245)](_0x92a673(0x209)+_0x39f25f+_0x92a673(0x23e)+_0x51bb21['count']),Promise['resolve']();})['catch'](_0x1d73a9=>{const _0x5d8f68=_0x39ced9;return this[_0x5d8f68(0x25e)][_0x5d8f68(0x245)](_0x5d8f68(0x272)+_0x1d73a9),Promise[_0x5d8f68(0x232)]();})[_0x39ced9(0x25f)](()=>this['nextChunk'](_0x51bb21,_0x39f25f))[_0x39ced9(0x25f)](_0x5e66a9)[_0x39ced9(0x20e)](_0x1550dd);}catch(_0xd884d1){_0x1550dd(_0xd884d1);}});}[a40_0xabe7e8(0x24b)](){return new Promise(_0xf4b52c=>{const _0x1a8d55=a40_0x5d68;try{this[_0x1a8d55(0x25e)]['log'](_0x1a8d55(0x295));const _0x3a51f4=this[_0x1a8d55(0x277)]+'/'+constants[_0x1a8d55(0x1eb)];if(fs['existsSync'](_0x3a51f4)){const _0x81991e=_0x3a51f4+_0x1a8d55(0x238);if(this[_0x1a8d55(0x25e)][_0x1a8d55(0x1ea)][_0x1a8d55(0x234)]&&fs['existsSync'](_0x81991e)){const _0x160e8b=fs['readdirSync'](_0x81991e);if(_0x160e8b&&_0x160e8b[_0x1a8d55(0x234)]){const _0x10a3d4=_0x160e8b[0x0];if(_0x10a3d4['includes'](_0x1a8d55(0x269))&&_0x10a3d4[_0x1a8d55(0x293)](_0x1a8d55(0x241))){const _0x28adf8='FlosumErrors:\x20'+JSON[_0x1a8d55(0x23c)](this[_0x1a8d55(0x25e)][_0x1a8d55(0x1ea)]);fs['appendFileSync']('./'+_0x81991e+'/'+_0x10a3d4,_0x28adf8);}}}const _0x3aa40c=new AdmZip();_0x3aa40c[_0x1a8d55(0x226)](_0x3a51f4,constants[_0x1a8d55(0x1eb)]),_0xf4b52c(_0x3aa40c[_0x1a8d55(0x215)]()[_0x1a8d55(0x22b)]('base64')),this[_0x1a8d55(0x25e)][_0x1a8d55(0x245)](_0x1a8d55(0x201));}else this[_0x1a8d55(0x25e)][_0x1a8d55(0x245)](_0x1a8d55(0x1e9)),_0xf4b52c();}catch(_0x16fbce){this['logger'][_0x1a8d55(0x245)]('Error\x20Create\x20Vlocity\x20Temp\x20Zip\x20'+_0x16fbce),_0xf4b52c();}});}async[a40_0xabe7e8(0x254)](_0x2c6792){const _0x2e1bbe=a40_0xabe7e8;this['logger']['log'](_0x2e1bbe(0x285));const _0x29e3f5={'Name':'Vlocity\x20Temp','ContentType':_0x2e1bbe(0x22f),'Description':_0x2e1bbe(0x28a),'ParentId':this[_0x2e1bbe(0x287)],'Body':_0x2c6792};await this[_0x2e1bbe(0x256)][_0x2e1bbe(0x28d)](_0x29e3f5),this[_0x2e1bbe(0x25e)][_0x2e1bbe(0x245)](_0x2e1bbe(0x258));}[a40_0xabe7e8(0x206)](){return new Promise(_0x4ee90c=>{const _0x4c65ac=a40_0x5d68;try{if(fs[_0x4c65ac(0x23a)](this[_0x4c65ac(0x277)]+'/'+constants[_0x4c65ac(0x1ff)])){const _0x489eae=yaml[_0x4c65ac(0x244)](fs[_0x4c65ac(0x294)](this[_0x4c65ac(0x277)]+'/'+constants['NAME_LOGS_FILE'],_0x4c65ac(0x283)));_0x489eae[_0x4c65ac(0x273)]&&_0x489eae[_0x4c65ac(0x273)][_0x4c65ac(0x234)]?(this['logger'][_0x4c65ac(0x245)]('Errors\x20found,\x20start\x20pack\x20retry\x20command\x20\x0a'+_0x489eae[_0x4c65ac(0x273)][_0x4c65ac(0x28f)]('\x0a')),_0x4ee90c(!![])):_0x4ee90c(![]);}else _0x4ee90c(![]);}catch(_0x3ff49d){_0x4ee90c(![]);}});}[a40_0xabe7e8(0x284)](_0x55d79f,_0x124893=![]){return new Promise((_0x4fd76d,_0x1662e9)=>{const _0x55919b=a40_0x5d68;try{Promise['resolve']()['then'](()=>this[_0x55919b(0x24b)]())['then'](_0x24eb8a=>{const _0x379997=_0x55919b;if(_0x24eb8a)return this[_0x379997(0x254)](_0x24eb8a);return Promise[_0x379997(0x232)]();})[_0x55919b(0x25f)](()=>http[_0x55919b(0x268)](this[_0x55919b(0x277)],this['jsForceHelper'],this[_0x55919b(0x200)],this[_0x55919b(0x25e)],_0x124893,!![]))[_0x55919b(0x25f)](_0x2fa423=>{const _0x316cb8=_0x55919b;return _0x124893=_0x2fa423,http[_0x316cb8(0x261)](this[_0x316cb8(0x256)],this[_0x316cb8(0x289)],this[_0x316cb8(0x23f)],_0x55d79f,this[_0x316cb8(0x25e)],_0x2fa423);})[_0x55919b(0x25f)](()=>this['callUpdateSnapshot'](_0x124893));}catch(_0x58d30b){_0x1662e9(_0x58d30b);}});}async[a40_0xabe7e8(0x1ef)](_0x242663){const _0x5cc230=a40_0xabe7e8;this[_0x5cc230(0x25e)]['log'](_0x5cc230(0x257));const _0x5ce419={'Id':this[_0x5cc230(0x287)],[this['nameSpacePrefix']+'Is_Completed__c']:!![],[this['nameSpacePrefix']+_0x5cc230(0x25b)]:_0x242663};return await this[_0x5cc230(0x256)][_0x5cc230(0x20a)](this[_0x5cc230(0x23f)],_0x5ce419),this[_0x5cc230(0x25e)][_0x5cc230(0x245)]('End\x20Update\x20Snapshot'),_0x5ce419[this[_0x5cc230(0x23f)]+_0x5cc230(0x25b)];}}module['exports']={'RetrieveHelper':RetrieveHelper};