function a44_0x36ae(){const _0x4ac518=['_DataPack.json','prepareSnapshotChunks','VlocityDataStore','readFile','750956QofaDg','createdByName','Nothing\x20to\x20deploy','snapshotId','718114CKuZmh','constants','F_OK','21051xwBgll','findRecord','projectPath','getComponentData','6zLMZZo','has','path','execute','sourcePath','access','chunks','90qJWdSz','endsWith','crc-32','processedComponents','7338010pyOmac','sendChunkToSnapshot','stringify','CustomFieldMap','log','readdir','2040wnRFnJ','119203iXyoJY','post','buf','logger','findSubComponents','replaceAll','parse','add','split',',\x20size\x20more\x20then\x203mb.','5484930CthHyv','catch','Error\x20deploy\x20chunk\x20','lastModifiedByName','53272TnYvdD','fs/promises','lastModifiedDate','../../../services/http','length','findComponentName','SnapshotVlocity/','../../../services/logger','push','lstat','Cannot\x20retrieve\x20component\x20','get','toString'];a44_0x36ae=function(){return _0x4ac518;};return a44_0x36ae();}const a44_0x29c583=a44_0x45d1;(function(_0x5ec8be,_0x40ebe8){const _0x5e7091=a44_0x45d1,_0x1012ae=_0x5ec8be();while(!![]){try{const _0x339225=parseInt(_0x5e7091(0x1b4))/0x1+-parseInt(_0x5e7091(0x19f))/0x2+parseInt(_0x5e7091(0x1bb))/0x3*(parseInt(_0x5e7091(0x1b0))/0x4)+parseInt(_0x5e7091(0x1d7))/0x5+-parseInt(_0x5e7091(0x1c2))/0x6*(parseInt(_0x5e7091(0x1cd))/0x7)+-parseInt(_0x5e7091(0x1cc))/0x8*(parseInt(_0x5e7091(0x1b7))/0x9)+-parseInt(_0x5e7091(0x1c6))/0xa;if(_0x339225===_0x40ebe8)break;else _0x1012ae['push'](_0x1012ae['shift']());}catch(_0x52d68c){_0x1012ae['push'](_0x1012ae['shift']());}}}(a44_0x36ae,0x8d2d5));function a44_0x45d1(_0x2f9b8d,_0x2a65cf){const _0x36ae70=a44_0x36ae();return a44_0x45d1=function(_0x45d16e,_0x36f236){_0x45d16e=_0x45d16e-0x19f;let _0x13ef66=_0x36ae70[_0x45d16e];return _0x13ef66;},a44_0x45d1(_0x2f9b8d,_0x2a65cf);}const path=require(a44_0x29c583(0x1bd)),fs=require(a44_0x29c583(0x1a0)),AdmZip=require('adm-zip'),crc32=require(a44_0x29c583(0x1c4)),http=require(a44_0x29c583(0x1a2)),{UNZIP_CATALOG_NAME}=require('../../../constants'),{Logger}=require(a44_0x29c583(0x1a6)),senderOptions={'projectPath':'','namespace':'','snapshotId':'','flosumAuth':{'instanceUrl':'','accessToken':''},'logger':new Logger()};class SnapshotComponentSender{constructor({projectPath:_0x577b45,namespace:_0x3fecbb,snapshotId:_0x4a1e9a,flosumAuth:_0x32de71,logger:_0x3bc925}=senderOptions){const _0x2f310c=a44_0x29c583;this[_0x2f310c(0x1b9)]=_0x577b45,this['namespace']=_0x3fecbb,this[_0x2f310c(0x1b3)]=_0x4a1e9a,this['flosumAuth']=_0x32de71,this['logger']=_0x3bc925,this[_0x2f310c(0x1bf)]=this[_0x2f310c(0x1b9)]+'/'+UNZIP_CATALOG_NAME,this['chunks']=[],this[_0x2f310c(0x1c5)]=new Set();}async[a44_0x29c583(0x1ad)](_0x922b5){const _0x404974=a44_0x29c583;let _0x4e6fa8=0x0,_0x40bb7d=[],_0x27d812=0x0;const _0x299158=await fs[_0x404974(0x1cb)](this[_0x404974(0x1bf)]);for(const _0x48e041 of _0x299158){const _0x17f12b=await fs['readdir'](this['sourcePath']+'/'+_0x48e041);for(const _0x4f6b7b of _0x17f12b){const _0x2548b8=this[_0x404974(0x1bf)]+'/'+_0x48e041+'/'+_0x4f6b7b,_0x5ecd71=_0x48e041+'/'+_0x4f6b7b;if(this[_0x404974(0x1c5)][_0x404974(0x1bc)](_0x5ecd71))continue;const _0x525552=await this['findComponentName'](_0x48e041,_0x4f6b7b),_0x4e7af2=await this[_0x404974(0x1d1)](_0x48e041,_0x4f6b7b),_0xac0c6f=await this[_0x404974(0x1b8)](_0x922b5,_0x48e041,_0x4f6b7b,_0x525552),{crc:_0x5ca56c,base64:_0x2e8925,size:_0x25f704}=await this[_0x404974(0x1ba)](_0x2548b8,_0x48e041,_0x4f6b7b);if(_0x25f704>=0x2dc6c0){this[_0x404974(0x1d0)]['log'](_0x404974(0x1a9)+_0x5ecd71+_0x404974(0x1d6),!![]);continue;}const _0x29a2f4={'fileName':_0x525552,'name':_0x4f6b7b,'type':_0x48e041,'label':_0x5ecd71,'crc':_0x5ca56c,'base64':_0x2e8925,'snapshotId':this['snapshotId'],'subItemList':JSON[_0x404974(0x1c8)](_0x4e7af2),'lastModifiedByName':_0xac0c6f?.[_0x404974(0x1da)]||_0xac0c6f?.[_0x404974(0x1b1)],'lastModifiedDate':_0xac0c6f?.[_0x404974(0x1a1)]};this[_0x404974(0x1c5)][_0x404974(0x1d4)](_0x5ecd71);if(_0x4e6fa8+_0x25f704>0x1e8480||_0x27d812>0xfa0){this[_0x404974(0x1c1)][_0x404974(0x1a7)](_0x40bb7d),_0x40bb7d=[_0x29a2f4],_0x27d812=0x0,_0x4e6fa8=0x0;continue;}_0x40bb7d[_0x404974(0x1a7)](_0x29a2f4),_0x27d812++,_0x4e6fa8+=_0x25f704;}}_0x40bb7d[_0x404974(0x1a3)]&&this[_0x404974(0x1c1)][_0x404974(0x1a7)](_0x40bb7d);}async[a44_0x29c583(0x1b8)](_0x279b9f,_0x143a95,_0x392f94,_0x2cf160){const _0x4d0b95=a44_0x29c583,_0x33e8ba=_0x143a95+'/'+_0x392f94,_0x24ccdb=_0x143a95+'/'+_0x2cf160;if(_0x279b9f['has'](_0x33e8ba))return _0x279b9f[_0x4d0b95(0x1aa)](_0x33e8ba);if(_0x279b9f[_0x4d0b95(0x1bc)](_0x24ccdb))return _0x279b9f[_0x4d0b95(0x1aa)](_0x24ccdb);if(!_0x279b9f[_0x4d0b95(0x1bc)](_0x33e8ba)&&!_0x279b9f[_0x4d0b95(0x1bc)](_0x24ccdb)){let _0x396b13;(_0x143a95===_0x4d0b95(0x1c9)||_0x143a95===_0x4d0b95(0x1ae))&&(_0x396b13=_0x143a95+'/'+_0x392f94[_0x4d0b95(0x1d5)]('_c')[0x1]);(_0x143a95==='OrchestrationItemDefinition'||_0x143a95==='OmniScript')&&(_0x396b13=_0x143a95+'/'+_0x392f94[_0x4d0b95(0x1d2)]('-','\x20'));if(_0x396b13&&_0x279b9f[_0x4d0b95(0x1bc)](_0x396b13))return _0x279b9f[_0x4d0b95(0x1aa)](_0x396b13);}return;}async['sendChunkToSnapshot'](_0x5dbcb0){const _0x256eb5=a44_0x29c583;try{await http[_0x256eb5(0x1ce)](this['flosumAuth'],this['namespace'],{'items':_0x5dbcb0},_0x256eb5(0x1a5)),this[_0x256eb5(0x1d0)][_0x256eb5(0x1ca)]('Chunk\x20deployed');}catch(_0x5f4627){this['logger'][_0x256eb5(0x1ca)](_0x256eb5(0x1d9)+_0x5f4627);}}async[a44_0x29c583(0x1ba)](_0x59b1af,_0xac14fa,_0x4cb2dc){const _0x4bb8a1=a44_0x29c583,_0x247bf4=new AdmZip();_0x247bf4['addLocalFolder'](_0x59b1af,_0xac14fa+'/'+_0x4cb2dc);const _0x551844=_0x247bf4['toBuffer'](),_0xe95ae4=crc32[_0x4bb8a1(0x1cf)](_0x551844),_0x40dc53=_0x551844[_0x4bb8a1(0x1ab)]('base64'),_0x239797=_0x551844[_0x4bb8a1(0x1a3)];return{'crc':_0xe95ae4,'base64':_0x40dc53,'size':_0x239797};}async[a44_0x29c583(0x1a4)](_0x242720,_0x5b268a){const _0x7926b8=a44_0x29c583,_0x38103d=this[_0x7926b8(0x1bf)]+'/'+_0x242720+'/'+_0x5b268a,_0x549066=await fs[_0x7926b8(0x1cb)](_0x38103d);for(const _0x2876b9 of _0x549066){if(!_0x2876b9[_0x7926b8(0x1c3)](_0x7926b8(0x1ac)))continue;try{const _0x44a402=await fs[_0x7926b8(0x1af)](_0x38103d+'/'+_0x2876b9),_0x55f131=JSON[_0x7926b8(0x1d3)](_0x44a402[_0x7926b8(0x1ab)]());return _0x55f131['Name']||_0x55f131['Title']||_0x5b268a;}catch{return _0x5b268a;}}return _0x5b268a;}async[a44_0x29c583(0x1d1)](_0x50ab83,_0x21dd5c,_0x2794ea=''){const _0x25d97a=a44_0x29c583;_0x2794ea&&(_0x2794ea=_0x2794ea+'/');const _0x5ee2e2=[],_0xcff34b=this[_0x25d97a(0x1bf)]+'/'+_0x50ab83+'/'+_0x21dd5c+'/'+_0x2794ea,_0x12f9f5=await fs[_0x25d97a(0x1cb)](_0xcff34b);for(const _0x2d5cbc of _0x12f9f5){const _0x82c88e=_0xcff34b+'/'+_0x2d5cbc,_0x1e1ced=await fs[_0x25d97a(0x1a8)](_0x82c88e);if(!_0x1e1ced['isDirectory']()){_0x2794ea&&_0x5ee2e2['push'](''+_0x2794ea+_0x2d5cbc);continue;}const _0x50c170=await this['findSubComponents'](_0x50ab83,_0x21dd5c,''+_0x2794ea+_0x2d5cbc);_0x5ee2e2[_0x25d97a(0x1a7)](..._0x50c170);}return _0x5ee2e2;}async[a44_0x29c583(0x1be)](_0x58d3bb){const _0x12b6ad=a44_0x29c583,_0x474931=await fs[_0x12b6ad(0x1c0)](this[_0x12b6ad(0x1bf)],fs[_0x12b6ad(0x1b5)][_0x12b6ad(0x1b6)])['then'](()=>!![])[_0x12b6ad(0x1d8)](()=>![]);if(!_0x474931){this[_0x12b6ad(0x1d0)]['log'](_0x12b6ad(0x1b2));return;}const _0x1223bf=await fs[_0x12b6ad(0x1cb)](this[_0x12b6ad(0x1bf)]);if(!_0x1223bf['length']){this['logger'][_0x12b6ad(0x1ca)]('Nothing\x20to\x20deploy');return;}await this[_0x12b6ad(0x1ad)](_0x58d3bb);for(const _0x2ce7a4 of this['chunks']){await this[_0x12b6ad(0x1c7)](_0x2ce7a4);}this[_0x12b6ad(0x1c1)]=[];}}module['exports']={'SnapshotComponentSender':SnapshotComponentSender};