const a53_0x323470=a53_0xa152;(function(_0xb9391,_0x46a0a2){const _0x15be02=a53_0xa152,_0xd666fb=_0xb9391();while(!![]){try{const _0x477a78=parseInt(_0x15be02(0x1bf))/0x1*(-parseInt(_0x15be02(0x17f))/0x2)+parseInt(_0x15be02(0x194))/0x3+-parseInt(_0x15be02(0x1b6))/0x4+parseInt(_0x15be02(0x1a0))/0x5+parseInt(_0x15be02(0x1ae))/0x6*(-parseInt(_0x15be02(0x1aa))/0x7)+-parseInt(_0x15be02(0x1a8))/0x8*(parseInt(_0x15be02(0x197))/0x9)+-parseInt(_0x15be02(0x1b9))/0xa*(-parseInt(_0x15be02(0x198))/0xb);if(_0x477a78===_0x46a0a2)break;else _0xd666fb['push'](_0xd666fb['shift']());}catch(_0x25a2ad){_0xd666fb['push'](_0xd666fb['shift']());}}}(a53_0x2bc4,0xcece0));const axios=require(a53_0x323470(0x1a5)),yaml=require(a53_0x323470(0x17a)),constants=require(a53_0x323470(0x191)),storage=require(a53_0x323470(0x19b)),CLIENT_CREDENTIALS_TYPE=a53_0x323470(0x18e);async function post(_0x34ecc2,_0xffb2d,_0xc76a6d,_0x177ac5=a53_0x323470(0x1c5),_0x3a9470=![]){const _0x266212=a53_0x323470,_0x52916d={'Authorization':_0x266212(0x1a1)+_0x34ecc2[_0x266212(0x17b)],'Content-Type':_0x266212(0x1b7)};_0xffb2d=_0xffb2d&&_0xffb2d[_0x266212(0x1a3)]?_0xffb2d[_0x266212(0x178)]('__','')+'/':'';const _0x3b65ec=_0x34ecc2[_0x266212(0x177)]+'/services/apexrest/'+_0xffb2d+_0x177ac5;try{return await axios[_0x266212(0x1b4)](_0x3b65ec,_0xc76a6d,{'headers':_0x52916d});}catch(_0x47cdbe){if(_0x47cdbe?.[_0x266212(0x1b1)]?.[_0x266212(0x18a)]===0x191&&!_0x3a9470&&_0x34ecc2['clientId']&&_0x34ecc2[_0x266212(0x1c4)])return _0x34ecc2[_0x266212(0x17b)]=await refreshToken(_0x34ecc2),await post(_0x34ecc2,_0xffb2d,_0xc76a6d,_0x177ac5,!![]);throw getErrorMessage(_0x47cdbe);}}function getErrorMessage(_0x54e13c){const _0x3a1213=a53_0x323470,_0x1e32d6=_0x54e13c?.[_0x3a1213(0x1b1)]?.[_0x3a1213(0x190)];if(_0x1e32d6){if(typeof _0x1e32d6===_0x3a1213(0x192))return _0x1e32d6;if(_0x1e32d6[_0x3a1213(0x181)])return _0x1e32d6[_0x3a1213(0x181)];}if(_0x54e13c?.['message'])return _0x54e13c[_0x3a1213(0x181)];return _0x3a1213(0x19c)+_0x54e13c;}async function refreshToken({instanceUrl:_0x45106e,clientId:_0x344c08,clientSecret:_0x50d328}){const _0x4076fd=a53_0x323470,{data:_0x36aa83}=await axios[_0x4076fd(0x1b4)](_0x45106e+_0x4076fd(0x180),null,{'params':{'grant_type':CLIENT_CREDENTIALS_TYPE,'client_id':_0x344c08,'client_secret':_0x50d328}});return _0x36aa83[_0x4076fd(0x18d)];}function callUpdateInfo(_0x2879cb,_0x4ef664,_0xcd706d,_0x32a2c8,_0x3f9b85,_0x3ea9a3,_0x564f66,_0x2b2d83=![]){return new Promise((_0xf0142,_0x3aaede)=>{const _0x5401a6=a53_0xa152;try{try{const _0x5ce200=yaml[_0x5401a6(0x1c7)](_0x3f9b85);_0x5ce200[_0x5401a6(0x1bd)]&&(_0x2b2d83=_0x5ce200[_0x5401a6(0x1bd)][_0x5401a6(0x1a3)]>0x0);}catch(_0x348ee9){}_0x564f66[_0x5401a6(0x1c2)]('Start\x20Update\x20Log\x20is\x20Success\x20=\x20'+_0x3ea9a3);const _0x3389bc={'logId':_0x4ef664,'attachmentLogId':_0x32a2c8,'isJobCompleted':!![],'status':_0x5401a6(0x189),'isSuccess':_0x3ea9a3,'isError':_0x2b2d83,'attachmentBody':_0x3f9b85+_0x5401a6(0x1ba)+_0x564f66[_0x5401a6(0x17c)][_0x5401a6(0x195)]('\x0a')},_0x47c670={'methodType':constants[_0x5401a6(0x17e)],'body':JSON[_0x5401a6(0x1a9)](_0x3389bc)};post(_0x2879cb,_0xcd706d,_0x47c670)['then'](_0x665913=>{const _0x3e4b8f=_0x5401a6;_0x564f66[_0x3e4b8f(0x1c2)](_0x3e4b8f(0x19a)+_0x3ea9a3),_0xf0142(_0x665913);})[_0x5401a6(0x187)](_0x5bf7e8=>{const _0xfa4e99=_0x5401a6;_0x564f66[_0xfa4e99(0x1c2)](_0xfa4e99(0x1ad)+_0x3ea9a3),_0x3aaede(_0x5bf7e8);});}catch(_0x48dc8c){_0x3aaede(_0x48dc8c);}});}function callNextVlocityStep(_0x13f1ee,_0x250950,_0x3c035f,_0x983673,_0x27e667,_0xdcb11c,_0x9ad1e8,_0x494609){return new Promise((_0x354857,_0x396b40)=>{const _0x148f02=a53_0xa152;try{_0x494609[_0x148f02(0x1c2)](_0x148f02(0x1bb));const _0x2ac377={'pipelineId':_0x3c035f,'pipelineNumber':_0x983673,'isPass':_0xdcb11c,'branchId':_0x9ad1e8,'pipelineKey':_0x27e667},_0x30617f={'methodType':constants['METHOD_NEXT_VLOCITY_STEP'],'body':JSON[_0x148f02(0x1a9)](_0x2ac377)};post(_0x13f1ee,_0x250950,_0x30617f)[_0x148f02(0x18f)](_0x3e9995=>{const _0x2ef88f=_0x148f02;_0x494609[_0x2ef88f(0x1c2)]('End\x20Next\x20Vlocity\x20Step'),_0x354857(_0x3e9995);})[_0x148f02(0x187)](_0x39168d=>{const _0x2889c7=_0x148f02;_0x494609[_0x2889c7(0x1c2)](_0x2889c7(0x176)),_0x396b40(_0x39168d);});}catch(_0x1747b0){_0x396b40(_0x1747b0);}});}function a53_0xa152(_0xd48320,_0x226ba1){const _0x2bc42d=a53_0x2bc4();return a53_0xa152=function(_0xa1527e,_0x551ef6){_0xa1527e=_0xa1527e-0x176;let _0x56d49a=_0x2bc42d[_0xa1527e];return _0x56d49a;},a53_0xa152(_0xd48320,_0x226ba1);}function callComponentList(_0x2e19fb,_0x2d3104,_0x3698b3,_0x1db1fd,_0x36f74e,_0x55992b=[]){return new Promise((_0x3e6cf6,_0x4093a9)=>{const _0x2d6055=a53_0xa152;try{_0x36f74e[_0x2d6055(0x1c2)]('Start\x20Call\x20Component\x20List');const _0x5e2a93={'methodType':constants['METHOD_TYPE_GET_ATTACHMENTS'],'body':JSON[_0x2d6055(0x1a9)](_0x2d3104)};post(_0x2e19fb,_0x3698b3,_0x5e2a93)[_0x2d6055(0x18f)](_0x31e47c=>{const _0x5cb355=_0x2d6055;let {data:_0x3a998b}=_0x31e47c;_0x3a998b=JSON[_0x5cb355(0x1a2)](_0x3a998b),_0x36f74e['log'](_0x5cb355(0x1b5)+Number[_0x5cb355(0x182)](_0x55992b[_0x5cb355(0x1a3)]/_0x1db1fd*0x64)[_0x5cb355(0x1b8)](0x2)+'%'),_0x55992b['push'](..._0x3a998b[_0x5cb355(0x183)]),_0x3a998b[_0x5cb355(0x1c3)]&&_0x3a998b[_0x5cb355(0x1c3)][_0x5cb355(0x1a3)]?callComponentList(_0x2e19fb,_0x3a998b[_0x5cb355(0x1c3)],_0x3698b3,_0x1db1fd,_0x36f74e,_0x55992b)[_0x5cb355(0x18f)](_0x5b5472=>_0x3e6cf6(_0x5b5472))[_0x5cb355(0x187)](_0x4d8f65=>{_0x36f74e['log']('Error\x20Call\x20Component\x20List'),_0x4093a9(_0x4d8f65);}):(_0x36f74e[_0x5cb355(0x1c2)](_0x5cb355(0x1a6)),_0x3e6cf6(_0x55992b));})[_0x2d6055(0x187)](_0x2e01d4=>{const _0x22ba0b=_0x2d6055;_0x36f74e[_0x22ba0b(0x1c2)](_0x22ba0b(0x17d)),_0x4093a9(_0x2e01d4);});}catch(_0x51a552){_0x36f74e[_0x2d6055(0x1c2)]('Error\x20Call\x20Component\x20List'),_0x4093a9(_0x51a552);}});}async function getBodyFromStream(_0xb6ff02,_0x24b886,_0x4692b7){return new Promise(_0x589feb=>{const _0x329bef=a53_0xa152;try{const _0x4d3402=[];_0xb6ff02['on'](_0x329bef(0x190),(_0x19e211,_0x237e25)=>{_0x4d3402['push'](_0x19e211);}),_0xb6ff02['on'](_0x329bef(0x1ab),()=>{const _0xd55222=_0x329bef;_0x24b886?_0x589feb(_0x4d3402['join']('')):_0x589feb(Buffer[_0xd55222(0x19f)](_0x4d3402));}),_0xb6ff02['on'](_0x329bef(0x1bc),_0x7e5a3e=>{const _0x1ee69c=_0x329bef;_0x4692b7[_0x1ee69c(0x1c2)](_0x1ee69c(0x185)+_0x7e5a3e),_0x589feb('');});}catch(_0x52a7de){_0x4692b7[_0x329bef(0x1c2)](_0x329bef(0x185)+_0x52a7de),_0x589feb('');}});}async function getAttachmentBody(_0xe3ae2f,_0x3bf9c3,_0x470b26,_0x54d177=!![]){const _0xdae7bd=a53_0x323470,_0x3cfb03=await _0xe3ae2f[_0xdae7bd(0x186)](_0x3bf9c3);return await getBodyFromStream(_0x3cfb03,_0x54d177,_0x470b26);}function getTime(){const _0x25b381=a53_0x323470,_0x57718e=new Date(),_0x5e35a4=[_0x57718e['getDate'](),_0x57718e['getMonth']()+0x1,_0x57718e[_0x25b381(0x199)](),_0x57718e['getHours'](),_0x57718e[_0x25b381(0x1c6)](),_0x57718e[_0x25b381(0x184)]()];return _0x5e35a4[_0x25b381(0x1be)](_0xa2671f=>_0xa2671f=_0xa2671f[_0x25b381(0x188)]()[_0x25b381(0x178)](/^([0-9])$/,_0x25b381(0x1b3))),_0x5e35a4[0x2]+'-'+_0x5e35a4[0x1]+'-'+_0x5e35a4[0x0]+'\x20'+_0x5e35a4[0x3]+':'+_0x5e35a4[0x4]+':'+_0x5e35a4[0x5];}function callUpdateAttachmentLog(_0x9bf742,_0x2fc33e,_0x3b04d7,_0x5f5970,_0xe9728e){return new Promise(_0x29c0f4=>{const _0x5ebc3a=a53_0xa152;try{const _0x24b08a=_0x3b04d7+'\x0a'+_0x5f5970[_0x5ebc3a(0x17c)][_0x5ebc3a(0x195)]('\x0a');_0x5f5970[_0x5ebc3a(0x17c)]=[];const _0x5dc68b={'Id':_0x2fc33e,'Body':Buffer[_0x5ebc3a(0x193)](_0x24b08a)[_0x5ebc3a(0x188)]('base64'),'ContentType':_0x5ebc3a(0x1b0)};_0x9bf742[_0x5ebc3a(0x19e)](_0x5dc68b)['then'](()=>{_0x29c0f4(_0xe9728e);})[_0x5ebc3a(0x187)](_0x532efb=>{const _0x11d590=_0x5ebc3a;_0x5f5970[_0x11d590(0x1c2)](_0x11d590(0x1af)+_0x532efb),_0x29c0f4(_0xe9728e);});}catch(_0x7a4218){_0x5f5970['log']('Error\x20Update\x20Attachment\x20Log\x20'+_0x7a4218),_0x29c0f4(_0xe9728e);}});}function updateAttachmentLog(_0x3c4e1d,_0x285473,_0x3373b3,_0x1a9f90,_0x34c7b3,_0x3e372f=![]){return new Promise(_0x26f8fd=>{const _0x1fd6fa=a53_0xa152;try{_0x1a9f90[_0x1fd6fa(0x1c2)](_0x1fd6fa(0x18b)),Promise[_0x1fd6fa(0x1c0)]()['then'](()=>getAttachmentBody(_0x285473,_0x3373b3,_0x1a9f90))[_0x1fd6fa(0x18f)](_0x267dd4=>{const _0x8db712=_0x1fd6fa;if(_0x3e372f)return storage[_0x8db712(0x1a7)](_0x3c4e1d,getTime(),_0x1a9f90)[_0x8db712(0x18f)](_0x5f4da0=>{const _0x426df5=_0x8db712;try{const _0x3b99c5=yaml[_0x426df5(0x1c7)](_0x5f4da0);_0x3b99c5[_0x426df5(0x1bd)][_0x426df5(0x1a3)]&&(_0x34c7b3=!![]);}catch(_0x35d9a4){_0x5f4da0='',_0x34c7b3=!![];}const _0x536e8d=_0x5f4da0+'\x0a'+_0x267dd4;return callUpdateAttachmentLog(_0x285473,_0x3373b3,_0x536e8d,_0x1a9f90,_0x34c7b3);});return callUpdateAttachmentLog(_0x285473,_0x3373b3,_0x267dd4,_0x1a9f90,_0x34c7b3);})[_0x1fd6fa(0x18f)](()=>_0x26f8fd(_0x34c7b3))[_0x1fd6fa(0x187)](()=>_0x26f8fd(_0x34c7b3));}catch(_0x423682){_0x1a9f90[_0x1fd6fa(0x1c2)]('Error\x20Update\x20Attachment\x20Log\x20'+_0x423682),_0x26f8fd(_0x34c7b3);}});}function callUpdateLog(_0x418914,_0x2bebf9,_0xf2add5,_0x167e0c,_0x41e950,_0x10afea=![]){return new Promise((_0x537c56,_0x1ffe66)=>{const _0x3fa254=a53_0xa152;try{_0x41e950[_0x3fa254(0x1c2)]('Start\x20Update\x20Metadata\x20Log\x20isError\x20'+_0x10afea+_0x3fa254(0x196)+_0x167e0c);const _0x4d0569=_0x167e0c&&!_0x10afea?_0x3fa254(0x189):_0x167e0c&&_0x10afea?_0x3fa254(0x1a4):_0x3fa254(0x1ac),_0x138e07={'Id':_0x2bebf9,[_0xf2add5+_0x3fa254(0x1b2)]:_0x4d0569,[_0xf2add5+_0x3fa254(0x1c8)]:_0x10afea,[_0xf2add5+_0x3fa254(0x179)]:_0x167e0c,[_0xf2add5+'Job_Completed__c']:!![]};_0x418914[_0x3fa254(0x19d)](_0xf2add5,_0x138e07)['then'](()=>{const _0x2da21b=_0x3fa254;_0x41e950[_0x2da21b(0x1c2)]('End\x20Update\x20Metadata\x20Log'),_0x537c56(_0x138e07[_0xf2add5+_0x2da21b(0x1c8)]);})[_0x3fa254(0x187)](_0x3b5e9e=>{const _0x455c05=_0x3fa254;_0x41e950[_0x455c05(0x1c2)](_0x455c05(0x18c)+_0x3b5e9e),_0x1ffe66(_0x3b5e9e);});}catch(_0x1a245d){_0x41e950[_0x3fa254(0x1c2)](_0x3fa254(0x18c)+_0x1a245d),_0x1ffe66(_0x1a245d);}});}module[a53_0x323470(0x1c1)]={'getTime':getTime,'refreshToken':refreshToken,'post':post,'callUpdateInfo':callUpdateInfo,'callNextVlocityStep':callNextVlocityStep,'callComponentList':callComponentList,'updateAttachmentLog':updateAttachmentLog,'getAttachmentBody':getAttachmentBody,'callUpdateAttachmentLog':callUpdateAttachmentLog,'callUpdateLog':callUpdateLog};function a53_0x2bc4(){const _0x3c829b=['End\x20Update\x20Log\x20is\x20Success\x20=\x20','../storage','Unknown\x20error:\x20','updateMetadataLog','updateAttachment','concat','1480895qPgkfk','OAuth\x20','parse','length','Partial\x20Completed','axios','End\x20Call\x20Component\x20List','readLogFile','1744tQOOsl','stringify','35uMWnxJ','end','Exception','Error\x20Update\x20Log\x20is\x20Success\x20=\x20','695028yXIwOl','Error\x20Update\x20Attachment\x20Log\x20','text/plain','response','Status__c','0$1','post','Retrieved:\x20','3151776SuvzDP','application/json','toFixed','29223260hkqvYj','Full\x20Process:\x0a\x0a','Start\x20Next\x20Vlocity\x20Step','error','Errors','forEach','2ZNcgLh','resolve','exports','log','idList','clientSecret','unlocked-packages','getMinutes','load','Is_Error__c','Error\x20Next\x20Vlocity\x20Step','instanceUrl','replace','Succeed__c','js-yaml','accessToken','logs','Error\x20Call\x20Component\x20List','METHOD_UPDATE_LOG','1449146cGeVeB','/services/oauth2/token','message','parseFloat','recordList','getSeconds','Error\x20Get\x20Attachment\x20Body\x20','getAttachmentBodyStream','catch','toString','Completed','status','....','Error\x20Update\x20Metadata\x20Log\x20','access_token','client_credentials','then','data','../../constants','string','from','2950575lJUBVL','join','\x20isSuccess\x20','22239cQacVS','11XXoPtD','getFullYear'];a53_0x2bc4=function(){return _0x3c829b;};return a53_0x2bc4();}